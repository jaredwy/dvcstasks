<!DOCTYPE xwork PUBLIC "-//OpenSymphony Group//XWork 1.1.1//EN" "http://www.opensymphony.com/xwork/xwork-1.1.1.dtd">

<xwork>
  <include file="webwork-default.xml"/>

  <package name="default" extends="webwork-default">
    <result-types>
      <result-type name="velocity" class="com.atlassian.xwork.results.ProfiledVelocityResult"/>
      <result-type name="velocity-xml" class="com.atlassian.xwork.results.XmlVelocityResult"/>
      <result-type name="freemarker-xml" class="com.atlassian.bamboo.ww2.results.FreemarkerXmlResult"/>
      <result-type name="freemarker-text" class="com.atlassian.bamboo.ww2.results.FreemarkerTextResult"/>
      <result-type name="velocity-css" class="com.atlassian.xwork.results.CSSVelocityResult"/>
      <result-type name="rss" class="com.atlassian.xwork.results.RssResult"/>
      <result-type name="redirect" class="com.atlassian.bamboo.ww2.results.ReturnableRedirectResult"/>
      <result-type name="loginRedirect" class="com.atlassian.bamboo.security.LoginRedirectResult"/>
    </result-types>

    <interceptors>
      <!-- Generic Interceptors -->
      <interceptor name="timer" class="com.opensymphony.xwork.interceptor.TimerInterceptor"/>
      <interceptor name="profiling" class="com.atlassian.xwork.interceptors.XWorkProfilingInterceptor"/>
      <interceptor name="logger" class="com.opensymphony.xwork.interceptor.LoggingInterceptor"/>
      <interceptor name="chain" class="com.opensymphony.xwork.interceptor.ChainingInterceptor"/>
      <interceptor name="static-params" class="com.opensymphony.xwork.interceptor.StaticParametersInterceptor"/>
      <interceptor name="trimParams" class="com.atlassian.bamboo.ww2.interceptors.TrimParametersInterceptor"/>
      <interceptor name="params" class="com.atlassian.xwork12.interceptors.SafeParametersInterceptor"/>
      <interceptor name="servlet" class="com.opensymphony.webwork.interceptor.ServletConfigInterceptor"/>
      <interceptor name="setup" class="com.atlassian.bamboo.ww2.interceptors.SetupCheckInterceptor"/>
      <interceptor name="buildConfig" class="com.atlassian.bamboo.ww2.interceptors.BuildConfigurationInterceptor"/>
      <interceptor name="buildConfigEdit" class="com.atlassian.bamboo.ww2.interceptors.BuildConfigurationEditInterceptor"/>
      <interceptor name="jsonValidation" class="com.atlassian.bamboo.ww2.interceptors.JSONValidationInterceptor"/>
      <interceptor name="bambooValidation" class="com.atlassian.bamboo.ww2.interceptors.BambooValidationInterceptor"/>
      <interceptor name="planLimitCheck" class="com.atlassian.bamboo.ww2.interceptors.PlanLimitAwareInterceptor" />
      <interceptor name="bambooWorkflow" class="com.atlassian.bamboo.ww2.interceptors.BambooWorkflowInterceptor"/>
      <interceptor name="permissionExecAndWait" class="com.atlassian.bamboo.ww2.interceptors.DelegatingSecurityExecuteAndWaitInterceptor"/>

      <!-- *Aware Interceptors. Order may be important here -->
      <interceptor name="planAware" class="com.atlassian.bamboo.ww2.interceptors.PlanAwareInterceptor"/>
      <interceptor name="chainAware" class="com.atlassian.bamboo.ww2.interceptors.ChainAwareInterceptor"/>
      <interceptor name="resultsSummaryAware" class="com.atlassian.bamboo.ww2.interceptors.ResultsSummaryAwareInteceptor" />      
      <interceptor name="buildResultsSummaryAware" class="com.atlassian.bamboo.ww2.interceptors.BuildResultsSummaryAwareInteceptor" />
      <interceptor name="navigationAware" class="com.atlassian.bamboo.ww2.interceptors.NavigationAwareInterceptor" />
      <interceptor name="resultsListAware" class="com.atlassian.bamboo.ww2.interceptors.ResultsListAwareInterceptor"/>
      <interceptor name="statisticsAware" class="com.atlassian.bamboo.ww2.interceptors.StatisticsAwareInterceptor" />
      <interceptor name="paginationAware" class="com.atlassian.bamboo.ww2.interceptors.PaginationAwareInterceptor" />

      <interceptor name="globalAdmin" class="com.atlassian.bamboo.ww2.interceptors.GlobalAdminInterceptor" />
      <interceptor name="execAndWaitWithStatus" class="com.atlassian.bamboo.ww2.interceptors.ExecAndWaitWithJSONStatusUpdateInterceptor" />

      <interceptor-stack name="awareness">
        <interceptor-ref name="planAware"/> 
        <interceptor-ref name="chainAware"/>
        <interceptor-ref name="resultsSummaryAware"/>
        <interceptor-ref name="buildResultsSummaryAware"/>
        <interceptor-ref name="navigationAware"/>
        <interceptor-ref name="resultsListAware"/>
        <interceptor-ref name="statisticsAware"/>
        <interceptor-ref name="paginationAware"/>
      </interceptor-stack>

      <!-- Signup check interceptor -->
      <interceptor name="signupCheck" class="com.atlassian.bamboo.ww2.interceptors.SignupAllowedCheckInterceptor"/>
      <interceptor name="permissionCheck" class="com.atlassian.bamboo.security.acegi.intercept.web.WebworkSecurityInterceptorProxy"/>
      <interceptor name="remoteApiCheck" class="com.atlassian.bamboo.ww2.interceptors.RemoteApiLoginInterceptor"/>

      <!-- Common stack between admin and default stack -->
      <interceptor-stack name="commonStackPreAdmin">
        <interceptor-ref name="exception"/>
        <interceptor-ref name="alias"/>
        <interceptor-ref name="servlet-config"/>
        <interceptor-ref name="trimParams"/>
        <interceptor-ref name="awareness"/>
        <interceptor-ref name="permissionCheck"/>
      </interceptor-stack>

      <interceptor-stack name="commonStackPreValidation">
        <interceptor-ref name="params"/>
        <interceptor-ref name="i18n"/>
        <interceptor-ref name="prepare"/>
        <interceptor-ref name="chain"/>
        <interceptor-ref name="model-driven"/>
        <interceptor-ref name="fileUpload"/>
        <interceptor-ref name="static-params"/>
        <interceptor-ref name="params"/>
        <interceptor-ref name="conversionError"/>
        <interceptor-ref name="jsonValidation"/>
      </interceptor-stack>

      <!-- Default stack -->
      <interceptor-stack name="defaultStack">
        <interceptor-ref name="commonStackPreAdmin"/>
        <interceptor-ref name="commonStackPreValidation"/>
        <interceptor-ref name="bambooValidation">
          <param name="excludeMethods">default,input,back,cancel,browse,read,edit,add,delete,list,view,copy,enable,disable</param>
        </interceptor-ref>
        <interceptor-ref name="bambooWorkflow">
          <param name="excludeMethods">default,input,back,cancel,browse,read,edit,add,delete,list,view,copy,enable,disable</param>
        </interceptor-ref>
      </interceptor-stack>

      <interceptor-stack name="basicAdminStackPreValidate">
        <interceptor-ref name="commonStackPreAdmin"/>
        <interceptor-ref name="globalAdmin"/>
        <interceptor-ref name="commonStackPreValidation"/>
      </interceptor-stack>

      <interceptor-stack name="globalAdminStack">
        <interceptor-ref name="basicAdminStackPreValidate"/>
        <interceptor-ref name="bambooValidation">
          <param name="excludeMethods">default,input,back,cancel,browse,read,edit,add,delete,list,view,copy,enable,disable</param>
        </interceptor-ref>
        <interceptor-ref name="bambooWorkflow">
          <param name="excludeMethods">default,input,back,cancel,browse,read,edit,add,delete,list,view,copy,enable,disable</param>
        </interceptor-ref>
      </interceptor-stack>

      <interceptor-stack name="globalAdminStackAlwaysValidate">
        <interceptor-ref name="basicAdminStackPreValidate"/>
        <interceptor-ref name="bambooValidation">
          <param name="excludeMethods">input,back,cancel,browse</param>
        </interceptor-ref>
        <interceptor-ref name="bambooWorkflow">
          <param name="excludeMethods">input,back,cancel,browse</param>
        </interceptor-ref>
      </interceptor-stack>

      <interceptor name="apiException" class="com.atlassian.bamboo.ww2.interceptors.RemoteApiExceptionInterceptor"/>

      <!-- Default API stack -->
      <interceptor-stack name="defaultApiStack">
        <interceptor-ref name="apiException"/>
        <interceptor-ref name="alias"/>
        <interceptor-ref name="servlet-config"/>
        <interceptor-ref name="awareness"/>
        <interceptor-ref name="permissionCheck"/>
        <interceptor-ref name="params"/>
        <interceptor-ref name="i18n"/>
        <interceptor-ref name="prepare"/>
        <interceptor-ref name="chain"/>
        <interceptor-ref name="model-driven"/>
        <interceptor-ref name="fileUpload"/>
        <interceptor-ref name="static-params"/>
        <interceptor-ref name="params"/>
        <interceptor-ref name="conversionError"/>
        <interceptor-ref name="bambooValidation">
          <param name="excludeMethods">default,input,back,cancel,browse,read,edit,add,delete,list,view,copy,enable,disable</param>
        </interceptor-ref>
        <interceptor-ref name="bambooWorkflow">
          <param name="excludeMethods">default,input,back,cancel,browse,read,edit,add,delete,list,view,copy,enable,disable</param>
        </interceptor-ref>
      </interceptor-stack>

      <interceptor-stack name="errorStack">
        <interceptor-ref name="alias"/>
        <interceptor-ref name="servlet-config"/>
        <interceptor-ref name="params"/>
        <interceptor-ref name="i18n"/>
        <interceptor-ref name="prepare"/>
        <interceptor-ref name="chain"/>
        <interceptor-ref name="model-driven"/>
        <interceptor-ref name="static-params"/>
        <interceptor-ref name="params"/>
        <interceptor-ref name="conversionError"/>
      </interceptor-stack>

      <!-- Stack for the setup process -->
      <interceptor-stack name="setupStack">
        <interceptor-ref name="setup"/>
        <interceptor-ref name="exception"/>
        <interceptor-ref name="alias"/>
        <interceptor-ref name="servlet-config"/>
        <interceptor-ref name="params"/>
        <interceptor-ref name="i18n"/>
        <interceptor-ref name="prepare"/>
        <interceptor-ref name="chain"/>
        <interceptor-ref name="model-driven"/>
        <interceptor-ref name="static-params"/>
        <interceptor-ref name="params"/>
        <interceptor-ref name="conversionError"/>
        <interceptor-ref name="bambooValidation">
          <param name="excludeMethods">default,input,back,cancel,browse,read,edit,add,delete,list,view,copy,enable,disable</param>
        </interceptor-ref>
        <interceptor-ref name="bambooWorkflow">
          <param name="excludeMethods">default,input,back,cancel,browse,read,edit,add,delete,list,view,copy,enable,disable</param>
        </interceptor-ref>
      </interceptor-stack>

      <!-- Stack for create and edit of projects and builds -->
      <interceptor-stack name="buildConfigStack">
        <interceptor-ref name="buildConfig" />
        <interceptor-ref name="planLimitCheck" />
        <interceptor-ref name="chain" />
        <interceptor-ref name="defaultStack" />
      </interceptor-stack>

      <interceptor-stack name="buildConfigEditStack">
        <interceptor-ref name="chain"/>
        <interceptor-ref name="buildConfigEdit" />
        <interceptor-ref name="buildConfig"/>
        <interceptor-ref name="defaultStack" />
      </interceptor-stack>

      <interceptor-stack name="remoteApiStack">
        <interceptor-ref name="remoteApiCheck" />
        <interceptor-ref name="defaultApiStack" />
      </interceptor-stack>

      <interceptor-stack name="waitingAction">
        <interceptor-ref name="defaultStack" />
        <interceptor-ref name="permissionExecAndWait" />
      </interceptor-stack>
      
    </interceptors>



    <default-interceptor-ref name="defaultStack"/>

    <global-results>
      <result name="wait" type="freemarker" >/wait.ftl</result>
      <result name="error" type="freemarker">/error.ftl</result>
      <result name="restrictedAdminAccessDeniedError" type="chain">
        <param name="actionName">accessDenied</param>
        <param name="namespace">/</param>
      </result>
      <result name="accessDenied" type="chain">
        <param name="actionName">accessDenied</param>
        <param name="namespace">/</param>
      </result>
      <result name="fiveOhOh" type="chain">
        <param name="actionName">500</param>
        <param name="namespace">/</param>
      </result>
      <result name="fourOhThree" type="chain">
        <param name="actionName">403</param>
        <param name="namespace">/</param>
      </result>
    </global-results>

    <global-exception-mappings>
      <exception-mapping exception="org.acegisecurity.AccessDeniedException" result="accessDenied"/>
      <exception-mapping exception="java.lang.Throwable" result="fiveOhOh"/>
    </global-exception-mappings>

  </package>


  <!-- =========================================================================================== Bootstrap Actions -->
  <package name="bootstrap" extends="default" namespace="/bootstrap">

    <default-interceptor-ref name="setupStack"/>
    
    <global-results>
      <result name="alreadySetup" type="redirect">/start.action</result>
    </global-results>

    <action name="selectSetupStep" class="com.atlassian.bamboo.ww2.actions.setup.SelectSetupStepAction">
      <interceptor-ref name="setupStack"/>
      <result name="success" type="redirect">${currentStep}</result>
      <result name="checklist" type="freemarker">/setup/checklist.ftl</result>
    </action>

  </package>



  <!-- =============================================================================================== Error Actions -->

  <package name="systemError" extends="default" namespace="/">

    <default-interceptor-ref name="errorStack"/>

    <action name="403" class="com.atlassian.bamboo.ww2.actions.error.ErrorAction">
      <param name="statusCode">403</param>
      <result name="input" type="freemarker">/error/403.ftl</result>
      <result name="success" type="freemarker">/error/403.ftl</result>
      <result name="error" type="freemarker">/error/403.ftl</result>
      <result name="error-rest-xml" type="freemarker">
        <param name="contentType">application/xml</param>
        <param name="location">/error/403-xml.ftl</param>
      </result>
      <result name="error-rest-json" type="freemarker">
        <param name="contentType">application/json</param>
        <param name="location">/error/403-json.ftl</param>
      </result>
    </action>

    <action name="404" class="com.atlassian.bamboo.ww2.actions.error.ErrorAction">
      <param name="statusCode">404</param>
      <result name="input" type="freemarker">/error/404.ftl</result>
      <result name="success" type="freemarker">/error/404.ftl</result>
      <result name="error" type="freemarker">/error/404.ftl</result>
    </action>

    <action name="500" class="com.atlassian.bamboo.ww2.actions.error.FiveOhOh">
      <result name="input" type="freemarker">/error/500.ftl</result>
      <result name="success" type="freemarker">/error/500.ftl</result>
      <result name="error" type="freemarker">/error/500.ftl</result>
    </action>

    <action name="accessDenied" class="com.atlassian.bamboo.ww2.actions.error.AccessDeniedAction">
      <result name="accessDeniedLogin" type="redirect">/userlogin!default.action?os_destination=${encodedCurrentUrl}</result>
      <result name="input" type="freemarker">/error/accessDenied.ftl</result>
      <result name="success" type="freemarker">/error/accessDenied.ftl</result>
      <result name="error" type="freemarker">/error/accessDenied.ftl</result>
    </action>

  </package>

  <package name="error" extends="default" namespace="/error">

    <default-interceptor-ref name="errorStack"/>

    <action name="error" class="com.atlassian.bamboo.ww2.actions.error.ErrorAction">
      <result name="error" type="freemarker">/error/error.ftl</result>
    </action>
  </package>

  <!-- =============================================================================================== Setup Actions -->
  <package name="setup" extends="bootstrap" namespace="/setup">

    <global-results>
      <result name="setupSuccess" type="redirect">/start.action</result>
    </global-results>

    <action name="setupLicense" class="com.atlassian.bamboo.ww2.actions.setup.SetupLicenseAction" method="default">
      <result name="input" type="freemarker">/setup/setupLicense.ftl</result>
    </action>

    <action name="validateLicense" class="com.atlassian.bamboo.ww2.actions.setup.SetupLicenseAction">
      <result name="input" type="freemarker">/setup/setupLicense.ftl</result>
      <result name="error" type="freemarker">/setup/setupLicense.ftl</result>
      <result name="custom-setup" type="redirect">/setup/setupGeneralConfiguration.action</result>
      <result name="express-setup" type="redirect">/setup/setupDefaultGeneral.action</result>
    </action>


    <action name="setupDefaultGeneral" class="com.atlassian.bamboo.ww2.actions.setup.SetupDefaultsAction" method="general">
      <interceptor-ref name="setupStack"/>
      <interceptor-ref name="execAndWaitWithStatus"/>
      <result name="wait" type="freemarker">/setup/setupWait.ftl</result>
      <result name="error" type="freemarker">/setup/setupExpressError.ftl</result>
      <result name="success" type="redirect">/setup/setupAdminUser.action</result>
    </action>

    <action name="setupDefaultDatabase" class="com.atlassian.bamboo.ww2.actions.setup.SetupDefaultsAction" method="database">
      <interceptor-ref name="setupStack"/>
      <interceptor-ref name="execAndWaitWithStatus"/>
      <result name="wait" type="freemarker">/setup/setupWait.ftl</result>
      <result name="error" type="freemarker">/setup/setupExpressError.ftl</result>
      <result name="success" type="redirect">/setup/setupAdminUser.action</result>
    </action>

    <action name="setupGeneralConfiguration" class="com.atlassian.bamboo.ww2.actions.setup.SetupGeneralConfiguration" method="default">
      <result name="error" type="freemarker">/setup/setupGeneralConfiguration.ftl</result>
      <result name="success" type="freemarker">/setup/setupGeneralConfiguration.ftl</result>
    </action>

    <action name="validateGeneralConfiguration" class="com.atlassian.bamboo.ww2.actions.setup.SetupGeneralConfiguration">
      <result name="error" type="freemarker">/setup/setupGeneralConfiguration.ftl</result>
      <result name="input" type="freemarker">/setup/setupGeneralConfiguration.ftl</result>
      <result name="success" type="redirect">/setup/setupDatabase.action</result>
    </action>

    <action name="setupDatabase" class="com.atlassian.bamboo.ww2.actions.setup.SetupDatabaseAction" method="default">
      <result name="error" type="freemarker">/setup/setupDatabase.ftl</result>
      <result name="input" type="freemarker">/setup/setupDatabase.ftl</result>
    </action>

    <action name="chooseDatabaseType" class="com.atlassian.bamboo.ww2.actions.setup.SetupDatabaseAction">
      <result name="error" type="freemarker">/setup/setupDatabase.ftl</result>
      <result name="input" type="freemarker">/setup/setupDatabase.ftl</result>
      <result name="standardDb" type="redirect">/setup/setupDatabaseConnection.action?selectedDatabase=${selectedDatabase}</result>
      <result name="embeddedDb" type="redirect">/setup/setupEmbeddedDatabase.action</result>
    </action>


    <action name="setupDatabaseConnection" class="com.atlassian.bamboo.ww2.actions.setup.SetupDatabaseConnectionAction" method="default">
      <result name="error" type="freemarker">/setup/setupDatabaseConnection.ftl</result>
      <result name="input" type="freemarker">/setup/setupDatabaseConnection.ftl</result>
    </action>

    <action name="performSetupDatabaseConnection" class="com.atlassian.bamboo.ww2.actions.setup.SetupDatabaseConnectionAction" method="execute">
      <interceptor-ref name="setupStack"/>
      <interceptor-ref name="execAndWaitWithStatus">
        <param name="delay">2000</param>
        <param name="delaySleepInterval">50</param>
      </interceptor-ref>
      <result name="wait" type="freemarker">/setup/setupWait.ftl</result>
      <result name="error" type="freemarker">/setup/setupDatabaseConnection.ftl</result>
      <result name="input" type="freemarker">/setup/setupDatabaseConnection.ftl</result>
      <result name="success" type="redirect">/setup/setupSelectImport.action</result>
    </action>

    <action name="setupEmbeddedDatabase" class="com.atlassian.bamboo.ww2.actions.setup.SetupEmbeddedDatabaseAction">
      <interceptor-ref name="setupStack"/>
      <interceptor-ref name="execAndWaitWithStatus"/>
      <result name="wait" type="freemarker">/setup/setupWait.ftl</result>
      <result name="error" type="freemarker">/setup/setupEmbeddedDbFailed.ftl</result>
      <result name="success" type="redirect">/setup/setupSelectImport.action</result>
    </action>

    <action name="setupSelectImport" class="com.atlassian.bamboo.ww2.actions.setup.SetupImportDataAction" method="default">
      <result name="error" type="freemarker">/setup/setupSelectImport.ftl</result>
      <result name="success" type="freemarker">/setup/setupSelectImport.ftl</result>
    </action>

    <action name="performImportData" class="com.atlassian.bamboo.ww2.actions.setup.SetupImportDataAction">
      <result name="error" type="freemarker">/setup/importFinished.ftl</result>
      <result name="input" type="freemarker">/setup/setupSelectImport.ftl</result>
      <result name="success" type="redirect">/setup/setupAdminUser.action</result>
    </action>

    <action name="setupAdminUser" class="com.atlassian.bamboo.ww2.actions.setup.SetupAdminUserAction" method="default">
      <result name="input" type="freemarker">/setup/setupAdminUser.ftl</result>
      <result name="error" type="freemarker">/setup/setupAdminUser.ftl</result>
    </action>

    <action name="performSetupAdminUser" class="com.atlassian.bamboo.ww2.actions.setup.SetupAdminUserAction">
      <result name="input" type="freemarker">/setup/setupAdminUser.ftl</result>
      <result name="error" type="freemarker">/setup/setupAdminUser.ftl</result>
      <result name="success" type="redirect">/setup/finishsetup.action</result>
    </action>

    <action name="finishsetup" class="com.atlassian.bamboo.ww2.actions.setup.FinishSetupAction">
      <interceptor-ref name="setupStack"/>
      <interceptor-ref name="execAndWaitWithStatus"/>
      <result name="wait" type="freemarker">/setup/setupWait.ftl</result>
      <result name="success" type="redirect">/start.action</result>
    </action>

    <action name="complete" >
      <result type="redirect">/start.action</result>
    </action>
  </package>

  <!-- =============================================================================================== Agent Actions -->
  <package name="agentAdmin" extends="default" namespace="/admin/agent">

    <action name="viewBuilders" class="com.atlassian.bamboo.configuration.agent.ViewBuilders" method="default">
      <interceptor-ref name="globalAdminStack"/>
      <result name="input" type="freemarker">/admin/agent/viewCapabilitiesByType.ftl</result>
    </action>

    <action name="editCapabilityKey" class="com.atlassian.bamboo.configuration.agent.ConfigureCapabilityKey" method="default">
      <result name="input" type="freemarker">/admin/agent/editCapabilityKey.ftl</result>
    </action>

    <action name="updateCapabilityConfiguration" class="com.atlassian.bamboo.configuration.agent.ConfigureCapabilityKey" method="update">
      <result name="input" type="freemarker">/admin/agent/editCapabilityKey.ftl</result>
      <result name="success" type="redirect">/admin/agent/viewCapabilityKey.action?capabilityKey=${capabilityKey}</result>
    </action>

    <action name="removeCapability" class="com.atlassian.bamboo.configuration.agent.ConfigureCapability" method="remove">
      <result name="input" type="freemarker">/admin/agent/viewCapabilityKey.ftl</result>
      <result name="success" type="redirect">/admin/agent/viewAgents.action</result>
    </action>

    <action name="viewJdks" class="com.atlassian.bamboo.configuration.agent.ViewJdks" method="default">
      <interceptor-ref name="globalAdminStack"/>
      <result name="input" type="freemarker">/admin/agent/viewCapabilitiesByType.ftl</result>
    </action>

    <action name="editCapability" class="com.atlassian.bamboo.configuration.agent.EditAgentCapability" method="default">
      <result name="input" type="freemarker">/admin/agent/editCapability.ftl</result>
    </action>
    <action name="updateCapability" class="com.atlassian.bamboo.configuration.agent.EditAgentCapability" method="editCapability">
      <interceptor-ref name="globalAdminStack"/>
      <result name="input" type="freemarker">/admin/agent/editCapability.ftl</result>
      <result name="success" type="redirect">/admin/agent/viewAgent.action?agentId=${agent.id}</result>
    </action>

    <action name="viewCapabilityKey" class="com.atlassian.bamboo.configuration.agent.ConfigureCapabilityKey" method="default">
      <result name="input" type="freemarker">/admin/agent/viewCapabilityKey.ftl</result>
    </action>

    <action name="editSharedCapability" class="com.atlassian.bamboo.configuration.agent.EditSharedCapability" method="default">
      <interceptor-ref name="globalAdminStack"/>
      <result name="input" type="freemarker">/admin/agent/editCapability.ftl</result>
    </action>
    <action name="updateSharedCapability" class="com.atlassian.bamboo.configuration.agent.EditSharedCapability" method="editCapability">
      <interceptor-ref name="globalAdminStack"/>
      <result name="input" type="freemarker">/admin/agent/editCapability.ftl</result>
      <result name="success" type="redirect">/admin/agent/viewAgent.action?agentId=${agent.id}</result>
    </action>

    <action name="renameCapability" class="com.atlassian.bamboo.configuration.agent.RenameAgentCapability" method="default">
      <interceptor-ref name="globalAdminStack"/>
      <result name="input" type="freemarker">/admin/agent/renameCapability.ftl</result>
      <result name="renameNotAllowed" type="freemarker">/admin/agent/renameCapabilityNotAllowed.ftl</result>
    </action>

    <action name="confirmRename" class="com.atlassian.bamboo.configuration.agent.RenameAgentCapability" method="confirmRename">
      <interceptor-ref name="globalAdminStack"/>
      <result name="input" type="freemarker">/admin/agent/renameCapability.ftl</result>
      <result name="needConfirm" type="freemarker">/admin/agent/renameConfirmation.ftl</result>
      <result name="success" type="chain">updateRenamedCapability</result>
    </action>

    <action name="updateRenamedCapability" class="com.atlassian.bamboo.configuration.agent.ExecuteRenameAgentCapability" method="renameCapability">
      <interceptor-ref name="globalAdminStack"/>
      <result name="input" type="freemarker">/admin/agent/renameCapability.ftl</result>
      <result name="success" type="redirect">/admin/agent/viewCapabilityKey.action?capabilityKey=${newCapabilityKey}</result>
    </action>

    <action name="viewAgents" class="com.atlassian.bamboo.configuration.agent.ConfigureAgents" method="default">
      <result name="input" type="freemarker">/admin/agent/viewAgents.ftl</result>
    </action>

    <action name="configureAgents" class="com.atlassian.bamboo.configuration.agent.ConfigureAgents">
      <result name="input" type="freemarker">/admin/agent/viewAgents.ftl</result>
      <result name="error" type="freemarker">/admin/agent/viewAgents.ftl</result>
      <result name="success" type="redirect">/admin/agent/configureAgents!default.action</result>
    </action>

    <action name="viewAgentPlanMatrix" class="com.atlassian.bamboo.configuration.agent.ViewAgentPlanMatrix">
      <result name="input" type="freemarker">/admin/agent/viewAgentPlanMatrix.ftl</result>
      <result name="error" type="freemarker">/admin/agent/viewAgentPlanMatrix.ftl</result>
      <result name="success" type="freemarker">/admin/agent/viewAgentPlanMatrix.ftl</result>
    </action>

    <action name="removeAgent" class="com.atlassian.bamboo.configuration.agent.ConfigureAgentDetails" method="remove">
      <result name="input" type="freemarker">/admin/agent/viewAgents.ftl</result>
      <result name="error" type="freemarker">/admin/agent/viewAgents.ftl</result>
      <result name="success" type="redirect">/admin/agent/configureAgents!default.action</result>
    </action>
    
    <action name="startAgent" class="com.atlassian.bamboo.configuration.agent.ConfigureAgentDetails" method="start">
      <result name="input" type="freemarker">/admin/agent/viewAgents.ftl</result>
      <result name="error" type="freemarker">/admin/agent/viewAgents.ftl</result>
      <result name="success" type="redirect">/admin/agent/viewAgent.action?agentId=${agent.id}</result>
    </action>

    <action name="stopAgent" class="com.atlassian.bamboo.configuration.agent.ConfigureAgentDetails" method="stop">
      <result name="input" type="freemarker">/admin/agent/viewAgents.ftl</result>
      <result name="error" type="freemarker">/admin/agent/viewAgents.ftl</result>
      <result name="success" type="redirect">/admin/agent/viewAgent.action?agentId=${agent.id}</result>
    </action>

    <action name="stopAgentNicely" class="com.atlassian.bamboo.configuration.agent.ConfigureAgentDetails" method="stopNicely">
      <result name="input" type="freemarker">/admin/agent/viewAgents.ftl</result>
      <result name="error" type="freemarker">/admin/agent/viewAgents.ftl</result>
      <result name="success" type="redirect">/admin/agent/viewAgent.action?agentId=${agent.id}</result>
    </action>

    <action name="addLocalAgent" class="com.atlassian.bamboo.configuration.agent.ConfigureAgentDetails" method="default">
      <interceptor-ref name="globalAdminStack"/>
      <result name="input" type="freemarker">/admin/agent/addAgent.ftl</result>
      <result name="error" type="freemarker">/admin/agent/addAgent.ftl</result>
    </action>

    <action name="createLocalAgent" class="com.atlassian.bamboo.configuration.agent.ConfigureAgentDetails" method="create">
      <interceptor-ref name="globalAdminStack"/>
      <result name="input" type="freemarker">/admin/agent/addAgent.ftl</result>
      <result name="error" type="freemarker">/admin/agent/addAgent.ftl</result>
      <result name="success" type="redirect">/admin/agent/viewAgent.action?agentId=${agent.id}</result>
    </action>

    <action name="controlRemoteAgentFunction" class="com.atlassian.bamboo.configuration.agent.ControlRemoteAgentsAvailability">
      <result name="success" type="redirect">/admin/agent/configureAgents!default.action</result>
    </action>

    <action name="disableRemoteAgentFunction" class="com.atlassian.bamboo.configuration.agent.ControlRemoteAgentsAvailability" method="disable">
      <result name="input" type="freemarker">/admin/agent/disableRemoteAgentFunction.ftl</result>
      <result name="error" type="freemarker">/admin/agent/disableRemoteAgentFunction.ftl</result>
      <result name="success" type="redirect">/admin/agent/configureAgents!default.action</result>
    </action>

    <action name="enableRemoteAgentFunction" class="com.atlassian.bamboo.configuration.agent.ControlRemoteAgentsAvailability" method="enable">
      <result name="success" type="redirect">/admin/agent/configureAgents!default.action</result>
    </action>


    <action name="addRemoteAgent" class="com.atlassian.bamboo.configuration.agent.AddRemoteAgent" method="default">
      <interceptor-ref name="globalAdminStack"/>
      <result name="input" type="freemarker">/admin/agent/addRemoteAgent.ftl</result>
    </action>

    <action name="viewAgent" class="com.atlassian.bamboo.configuration.agent.ViewAgentAdmin" method="default">
      <result name="input" type="freemarker">/admin/agent/viewAgent.ftl</result>
      <result name="redirectToDeadElasticAgentPage" type="redirect">/agent/viewOfflineElasticAgentDetails.action?agentId=${agent.id}</result>
      <result name="redirectAdminToDeadElasticAgentPage" type="redirect">/admin/agent/viewOfflineElasticAgentDetails.action?agentId=${agent.id}</result>
    </action>

    <action name="viewOfflineElasticAgentDetails" class="com.atlassian.bamboo.ww2.actions.admin.elastic.ViewOfflineElasticAgentDetailsAdminAction" method="default">
      <result name="input" type="freemarker">/admin/agent/viewOfflineElasticAgentDetails.ftl</result>
    </action>

    <action name="editAgentDetails" class="com.atlassian.bamboo.configuration.agent.ConfigureAgentDetails" method="default">
      <result name="input" type="freemarker">/admin/agent/editAgent.ftl</result>
      <result name="error" type="freemarker">/admin/agent/editAgent.ftl</result>
    </action>

    <action name="updateAgentDetails" class="com.atlassian.bamboo.configuration.agent.ConfigureAgentDetails" method="save">
      <result name="input" type="freemarker">/admin/agent/editAgent.ftl</result>
      <result name="error" type="freemarker">/admin/agent/editAgent.ftl</result>
      <result name="success" type="redirect">/admin/agent/viewAgent.action?agentId=${agent.id}</result>
    </action>

    <action name="enableAgent" class="com.atlassian.bamboo.configuration.agent.ConfigureAgentDetails" method="enable">
      <result name="success" type="redirect">/admin/agent/configureAgents!default.action?agentId=${agent.id}</result>
    </action>

    <action name="disableAgent" class="com.atlassian.bamboo.configuration.agent.ConfigureAgentDetails" method="disable">
      <result name="success" type="redirect">/admin/agent/configureAgents!default.action?agentId=${agent.id}</result>
    </action>

    <action name="configureAgentCapability" class="com.atlassian.bamboo.configuration.agent.ConfigureAgentCapability" method="default">
      <result name="input" type="freemarker">/admin/agent/configureAgentCapability.ftl</result>
    </action>

    <action name="addAgentCapability" class="com.atlassian.bamboo.configuration.agent.ConfigureAgentCapability" method="addCapability">
      <result name="input" type="freemarker">/admin/agent/configureAgentCapability.ftl</result>
      <result name="error" type="freemarker">/admin/agent/configureAgentCapability.ftl</result>
      <result name="success" type="redirect">/admin/agent/viewAgent.action?agentId=${agentId}</result>
    </action>

    <action name="deleteAgentCapability" class="com.atlassian.bamboo.configuration.agent.ConfigureAgentCapability" method="removeCapability">
      <result name="input" type="freemarker">/admin/agent/configureAgentCapability.ftl</result>
      <result name="error" type="freemarker">/admin/agent/configureAgentCapability.ftl</result>
      <result name="success" type="redirect">/admin/agent/viewAgent.action?agentId=${agentId}</result>
    </action>

    <action name="configureSharedLocalCapabilities" class="com.atlassian.bamboo.configuration.agent.ConfigureSharedLocalCapability" method="default">
      <interceptor-ref name="globalAdminStack"/>
      <result name="input" type="freemarker">/admin/agent/configureSharedCapabilities.ftl</result>
    </action>

    <action name="addSharedLocalCapability" class="com.atlassian.bamboo.configuration.agent.AddSharedLocalCapability" method="default">
      <interceptor-ref name="globalAdminStackAlwaysValidate"/>
      <result name="input" type="freemarker">/admin/agent/configureSharedCapabilities.ftl</result>
      <result name="error" type="freemarker">/admin/agent/configureSharedCapabilities.ftl</result>
      <result name="success" type="redirect">/admin/agent/configureSharedLocalCapabilities.action?capabilityKey=${capabilityKey}</result>
    </action>

    <action name="updateDefaultsLocalCapability" class="com.atlassian.bamboo.configuration.agent.UpdateDefaultsLocalCapability" method="default">
      <interceptor-ref name="globalAdminStack"/>
      <result name="input" type="freemarker">/admin/agent/configureSharedCapabilities.ftl</result>
      <result name="error" type="freemarker">/admin/agent/configureSharedCapabilities.ftl</result>
      <result name="success" type="redirect">/admin/agent/configureSharedLocalCapabilities.action</result>
    </action>

    <action name="deleteSharedLocalCapability" class="com.atlassian.bamboo.configuration.agent.ConfigureSharedLocalCapability" method="delete">
      <interceptor-ref name="globalAdminStack"/>
      <result name="input" type="freemarker">/admin/agent/configureSharedCapabilities.ftl</result>
      <result name="error" type="freemarker">/admin/agent/configureSharedCapabilities.ftl</result>
      <result name="success" type="redirect">/admin/agent/configureSharedLocalCapabilities.action</result>
    </action>

    <action name="configureSharedRemoteCapabilities" class="com.atlassian.bamboo.configuration.agent.ConfigureSharedRemoteCapability" method="default">
      <result name="input" type="freemarker">/admin/agent/configureSharedCapabilities.ftl</result>
    </action>

    <action name="addSharedRemoteCapability" class="com.atlassian.bamboo.configuration.agent.AddSharedRemoteCapability" method="default">
      <interceptor-ref name="globalAdminStackAlwaysValidate"/>
      <result name="input" type="freemarker">/admin/agent/configureSharedCapabilities.ftl</result>
      <result name="error" type="freemarker">/admin/agent/configureSharedCapabilities.ftl</result>
      <result name="success" type="redirect">/admin/agent/configureSharedRemoteCapabilities.action?capabilityKey=${capabilityKey}</result>
    </action>

    <action name="deleteSharedRemoteCapability" class="com.atlassian.bamboo.configuration.agent.ConfigureSharedRemoteCapability" method="delete">
      <result name="input" type="freemarker">/admin/agent/configureSharedCapabilities.ftl</result>
      <result name="error" type="freemarker">/admin/agent/configureSharedCapabilities.ftl</result>
      <result name="success" type="redirect">/admin/agent/configureSharedRemoteCapabilities.action</result>
    </action>
  </package>

  <package name="agentAdminAjax" extends="agentAdmin" namespace="/agent/admin/ajax">
    <action name="getAgents" class="com.atlassian.bamboo.ww2.actions.agent.AgentJsonProvider">
      <result name="input" type="json"/>
      <result name="error" type="json"/>
      <result name="success" type="json"/>
    </action>

    <action name="enableAgent" class="com.atlassian.bamboo.configuration.agent.ConfigureAgentDetails" method="enable">
      <result name="input" type="json"/>
      <result name="error" type="json"/>
      <result name="success" type="json"/>
    </action>

    <action name="disableAgent" class="com.atlassian.bamboo.configuration.agent.ConfigureAgentDetails" method="disable">
      <result name="input" type="json"/>
      <result name="error" type="json"/>
      <result name="success" type="json"/>
    </action>

    <action name="enableAllAgents" class="com.atlassian.bamboo.configuration.agent.ConfigureAgents" method="activateAll">
      <result name="input" type="json"/>
      <result name="error" type="json"/>
      <result name="success" type="json"/>
    </action>

    <action name="disableAllAgents" class="com.atlassian.bamboo.configuration.agent.ConfigureAgents" method="deactivateAll">
      <result name="input" type="json"/>
      <result name="error" type="json"/>
      <result name="success" type="json"/>
    </action>
  </package>

  <package name="agent" extends="default" namespace="/agent">

    <action name="viewAgent" class="com.atlassian.bamboo.configuration.agent.ViewAgent" method="default">
      <result name="input" type="freemarker">/agent/viewAgent.ftl</result>
      <result name="redirectToDeadElasticAgentPage" type="redirect">/agent/viewOfflineElasticAgentDetails.action?agentId=${agent.id}</result>
      <result name="redirectAdminToDeadElasticAgentPage" type="redirect">/admin/agent/viewOfflineElasticAgentDetails.action?agentId=${agent.id}</result>
    </action>

    <action name="viewAgentExecutablePlans" class="com.atlassian.bamboo.configuration.agent.ViewAgent" method="default">
      <result name="input" type="freemarker">/agent/viewAgentExecutablePlans.ftl</result>
      <result name="redirectToDeadElasticAgentPage" type="redirect">/agent/viewOfflineElasticAgentDetails.action?agentId=${agent.id}</result>
      <result name="redirectAdminToDeadElasticAgentPage" type="redirect">/admin/agent/viewOfflineElasticAgentDetails.action?agentId=${agent.id}</result>
    </action>

    <action name="viewAgentCapabilities" class="com.atlassian.bamboo.configuration.agent.ViewAgent" method="default">
      <result name="input" type="freemarker">/agent/viewAgentCapabilities.ftl</result>
      <result name="redirectToDeadElasticAgentPage" type="redirect">/agent/viewOfflineElasticAgentDetails.action?agentId=${agent.id}</result>
      <result name="redirectAdminToDeadElasticAgentPage" type="redirect">/admin/agent/viewOfflineElasticAgentDetails.action?agentId=${agent.id}</result>
    </action>

    <action name="viewOfflineElasticAgentDetails" class="com.atlassian.bamboo.configuration.agent.elastic.ViewOfflineElasticAgentDetailsAction" method="default">
      <result name="input" type="freemarker">/agent/viewOfflineElasticAgentDetails.ftl</result>
    </action>

    <action name="viewAgents" class="com.atlassian.bamboo.configuration.agent.ViewAgents" method="default">
      <result name="input" type="freemarker">/agent/viewAgents.ftl</result>
    </action>

    <!--filter-->
    <action name="setResultsFilter" class="com.atlassian.bamboo.configuration.agent.SetAgentBuildFilter">
      <result name="success" type="redirect">/start.action</result>
    </action>

  </package>

  <!-- =============================================================================================== Admin Actions -->
  <package name="admin" extends="default" namespace="/admin">

    <action name="viewConcurrentBuildConfig" class="com.atlassian.bamboo.ww2.actions.admin.ConfigureConcurrentBuilds" method="default">
      <result name="error" type="freemarker">/admin/viewConcurrentBuildConfig.ftl</result>
      <result name="input" type="freemarker">/admin/viewConcurrentBuildConfig.ftl</result>
    </action>

    <action name="editConcurrentBuildConfig" class="com.atlassian.bamboo.ww2.actions.admin.ConfigureConcurrentBuilds" method="default">
      <result name="input" type="freemarker">/admin/editConcurrentBuildConfig.ftl</result>
      <result name="error" type="freemarker">/admin/editConcurrentBuildConfig.ftl</result>
    </action>

    <action name="saveConcurrentBuildConfig" class="com.atlassian.bamboo.ww2.actions.admin.ConfigureConcurrentBuilds">
      <result name="input" type="freemarker">/admin/editConcurrentBuildConfig.ftl</result>
      <result name="error" type="freemarker">/admin/editConcurrentBuildConfig.ftl</result>
      <result name="success" type="redirect">/admin/viewConcurrentBuildConfig.action</result>
    </action>

    <action name="disableConcurrentBuildConfig" class="com.atlassian.bamboo.ww2.actions.admin.ConfigureConcurrentBuilds" method="disable" >
      <result name="error" type="freemarker">/admin/viewConcurrentBuildConfig.ftl</result>
      <result name="success" type="redirect">/admin/viewConcurrentBuildConfig.action</result>
    </action>

    <action name="viewPerforceManager" class="com.atlassian.bamboo.ww2.actions.admin.repository.ConfigurePerforceManager" method="default">
      <result name="input" type="freemarker">/admin/repository/viewPerforceManager.ftl</result>
      <result name="success" type="freemarker">/admin/repository/viewPerforceManager.ftl</result>
    </action>
    
    <action name="clearPerforceManagerCache" class="com.atlassian.bamboo.ww2.actions.admin.repository.ConfigurePerforceManager" method="clearCache">
      <result name="input" type="freemarker">/admin/repository/viewPerforceManager.ftl</result>
      <result name="success" type="redirect">/admin/viewPerforceManager.action</result>
    </action>

    <action name="chooseBuildsToMove" class="com.atlassian.bamboo.ww2.actions.build.admin.MoveBuilds" method="default">
      <result name="input" type="freemarker">/build/move/chooseBuildsToMove.ftl</result>
      <result name="error" type="freemarker">/build/move/chooseBuildsToMove.ftl</result>
    </action>

    <action name="selectBuildsToMove" class="com.atlassian.bamboo.ww2.actions.build.admin.MoveBuilds" method="selectPlans">
      <result name="input" type="freemarker">/build/move/chooseBuildsToMove.ftl</result>
      <result name="error" type="freemarker">/build/move/chooseBuildsToMove.ftl</result>
      <result name="success" type="freemarker">/build/move/chooseKeysForMove.ftl</result>
    </action>

    <action name="moveBuilds" class="com.atlassian.bamboo.ww2.actions.build.admin.MoveBuilds">
      <result name="input" type="freemarker">/build/move/chooseKeysForMove.ftl</result>
      <result name="error" type="freemarker">/build/move/chooseKeysForMove.ftl</result>
      <result name="success" type="freemarker">/build/move/resultOfPlanMove.ftl</result>
    </action>

    <action name="chooseBuildsToBulkEditPermissions" class="com.atlassian.bamboo.ww2.actions.build.admin.BulkEditBuildPermissions" method="default">
      <result name="input" type="freemarker">/build/bulkEditPermissions/chooseBuildsToBulkEditPermissions.ftl</result>
      <result name="error" type="freemarker">/build/bulkEditPermissions/chooseBuildsToBulkEditPermissions.ftl</result>
    </action>

    <action name="specifyBulkEditPermissions" class="com.atlassian.bamboo.ww2.actions.build.admin.BulkEditBuildPermissions" method="specifyPermissions">
      <result name="input" type="freemarker">/build/bulkEditPermissions/chooseBuildsToBulkEditPermissions.ftl</result>
      <result name="error" type="freemarker">/build/bulkEditPermissions/chooseBuildsToBulkEditPermissions.ftl</result>
      <result name="success" type="freemarker">/build/bulkEditPermissions/specifyBulkEditPermissions.ftl</result>
    </action>

    <action name="confirmBulkEditPermissions" class="com.atlassian.bamboo.ww2.actions.build.admin.BulkEditBuildPermissions" method="confirmBulkEditPermissions">
      <result name="input" type="freemarker">/build/bulkEditPermissions/specifyBulkEditPermissions.ftl</result>
      <result name="error" type="freemarker">/build/bulkEditPermissions/specifyBulkEditPermissions.ftl</result>
      <result name="success" type="freemarker">/build/bulkEditPermissions/confirmBulkEditPermissions.ftl</result>
    </action>

    <action name="saveBulkEditPermissions" class="com.atlassian.bamboo.ww2.actions.build.admin.BulkEditBuildPermissions" method="saveBulkEditPermissions">
      <result name="error" type="freemarker">/build/bulkEditPermissions/confirmBulkEditPermissions.ftl</result>
      <result name="success" type="redirect">/admin/chooseBuildsToBulkEditPermissions.action</result>
    </action>

    <!-- Global variables -->
    <action name="configureGlobalVariables" class="com.atlassian.bamboo.configuration.variable.ConfigureGlobalVariables">
      <result name="input" type="freemarker">/admin/configureGlobalVariables.ftl</result>
      <result name="error" type="freemarker">/admin/configureGlobalVariables.ftl</result>
      <result name="success" type="freemarker">/admin/configureGlobalVariables.ftl</result>
    </action>

    <action name="createGlobalVariable" class="com.atlassian.bamboo.configuration.variable.CreateGlobalVariable">
      <result name="input" type="json"/>
      <result name="error" type="json"/>
      <result name="success" type="redirect">/admin/configureGlobalVariables.action</result>
    </action>

    <action name="deleteGlobalVariable" class="com.atlassian.bamboo.configuration.variable.DeleteGlobalVariable">
      <result name="input" type="json"/>
      <result name="error" type="json"/>
      <result name="success" type="redirect">/admin/configureGlobalVariables.action</result>
    </action>

    <action name="updateGlobalVariable" class="com.atlassian.bamboo.configuration.variable.UpdateGlobalVariable">
      <result name="input" type="json"/>
      <result name="error" type="json"/>
      <result name="success" type="redirect">/admin/configureGlobalVariables.action</result>
    </action>


    <action name="manageCaches" class="com.atlassian.bamboo.ww2.actions.admin.ManageCachesAction" method="default">
      <result name="input" type="freemarker">/admin/manageCaches.ftl</result>
    </action>

    <action name="updateLicense" class="com.atlassian.bamboo.ww2.actions.admin.AdminUpdateLicenseAction">
      <interceptor-ref name="globalAdminStack"/>
      <result name="input" type="freemarker">/admin/updateLicense.ftl</result>
      <result name="success" type="redirect">/admin/updateLicense!default.action</result>
      <result name="error" type="freemarker">/admin/updateLicense.ftl</result>
    </action>

    <action name="reindex" class="com.atlassian.bamboo.index.ReindexAction">
      <interceptor-ref name="globalAdminStack"/>
      <result name="input" type="freemarker">/admin/index/reindex.ftl</result>
      <result name="success" type="freemarker">/admin/index/reindex.ftl</result>
    </action>

    <!-- System Administration -->
    <action name="configure" class="com.atlassian.bamboo.configuration.ConfigurationAction">
      <result name="input" type="freemarker">/admin/generalConfiguration.ftl</result>
      <result name="success" type="freemarker">/admin/generalConfiguration.ftl</result>
      <result name="error" type="freemarker">/admin/generalConfiguration.ftl</result>
    </action>

    <action name="viewDatabaseConfig" class="com.atlassian.bamboo.configuration.ConfigureDatabaseAction">
      <interceptor-ref name="globalAdminStack"/>
      <result name="success" type="freemarker">/admin/databaseConfiguration.ftl</result>
      <result name="error" type="freemarker">/admin/databaseConfiguration.ftl</result>
    </action>

    <action name="viewSecurity" class="com.atlassian.bamboo.configuration.ConfigureSecurity" method="default">
      <interceptor-ref name="globalAdminStack"/>
      <result name="input" type="freemarker">/admin/viewConfigureSecurity.ftl</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>

    <action name="configureSecurity" class="com.atlassian.bamboo.configuration.ConfigureSecurity" method="default">
      <interceptor-ref name="globalAdminStack"/>
      <result name="input" type="freemarker">/admin/configureSecurity.ftl</result>
      <result name="success" type="redirect">/admin/viewSecurity.action</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>

    <action name="configureGlobalPermissions" class="com.atlassian.bamboo.configuration.ConfigureGlobalPermissions">
      <result name="input" type="freemarker">/admin/configureGlobalPermissions.ftl</result>
      <result name="success" type="freemarker">/admin/viewGlobalPermissions.ftl</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>

    <action name="viewGlobalPermissions" class="com.atlassian.bamboo.configuration.ConfigureGlobalPermissions" method="default">
      <result name="input" type="freemarker">/admin/viewGlobalPermissions.ftl</result>
    </action>

    <action name="administer" class="com.atlassian.bamboo.configuration.AdministerAction">
      <result name="success" type="freemarker">/admin/administer.ftl</result>
      <result name="error" type="freemarker">/admin/administer.ftl</result>
    </action>

    <action name="systemInfo" class="com.atlassian.bamboo.configuration.SystemInfoAction">
      <result name="success" type="freemarker">/admin/systemInfo.ftl</result>
    </action>

    <action name="systemErrors" class="com.atlassian.bamboo.configuration.AdministerAction">
      <result name="success" type="freemarker">/admin/systemErrors.ftl</result>
    </action>

    <action name="viewGlobalAuditLog" class="com.atlassian.bamboo.configuration.ViewGlobalAuditLogAction">
      <result name="success" type="freemarker">/admin/viewGlobalAuditLog.ftl</result>
    </action>

    <action name="deleteGlobalAuditLog" class="com.atlassian.bamboo.configuration.ViewGlobalAuditLogAction" method="delete">
      <result name="success" type="redirect">/admin/viewGlobalAuditLog.action</result>
    </action>

    <action name="deleteAllAuditLogs" class="com.atlassian.bamboo.configuration.ViewGlobalAuditLogAction" method="deleteAll">
      <result name="success" type="redirect">/admin/viewGlobalAuditLog.action</result>
    </action>

    <action name="enableAllAuditLogs" class="com.atlassian.bamboo.configuration.ViewGlobalAuditLogAction" method="enable">
      <result name="success" type="redirect">/admin/viewGlobalAuditLog.action</result>
    </action>

    <action name="disableAllAuditLogs" class="com.atlassian.bamboo.configuration.ViewGlobalAuditLogAction" method="disable">
      <result name="success" type="redirect">/admin/viewGlobalAuditLog.action</result>
    </action>

    <action name="configLog4j" class="com.atlassian.bamboo.configuration.ConfigureLog4jAction">
      <result name="success" type="freemarker">/admin/configureLog4j.ftl</result>
    </action>

    <action name="deleteLog4jClass" class="com.atlassian.bamboo.configuration.ConfigureLog4jAction" method="delete">
        <result name="success" type="redirect">/admin/configLog4j.action</result>         
    </action>

      <action name="saveLog4jClass" class="com.atlassian.bamboo.configuration.ConfigureLog4jAction" method="saveClass">
          <result name="success" type="redirect">/admin/configLog4j.action</result>
      </action>

    <action name="addLog4jEntry" class="com.atlassian.bamboo.configuration.ConfigureLog4jAction" method="add">
        <result name="success" type="redirect">/admin/configLog4j.action</result>
    </action>


    <action name="buildExpiry" class="com.atlassian.bamboo.build.expiry.BuildExpiryAction">
      <result name="input" type="freemarker">/admin/build/editBuildExpiry.ftl</result>
      <result name="error" type="freemarker">/admin/build/editBuildExpiry.ftl</result>
      <result name="read" type="freemarker">/admin/build/viewBuildExpiry.ftl</result>
      <result name="success" type="redirect">/admin/buildExpiry!read.action</result>
    </action>

    <action name="runBuildExpiry" class="com.atlassian.bamboo.build.expiry.BuildExpiryAction" method="run">
      <result name="input" type="freemarker">/admin/build/editBuildExpiry.ftl</result>
      <result name="success" type="freemarker">/admin/build/viewBuildExpiry.ftl</result>
    </action>

    <action name="buildHangingDetection" class="com.atlassian.bamboo.build.monitoring.ConfigureGlobalBuildHangingDetection">
      <result name="read" type="freemarker">/admin/build/monitoring/viewBuildHangingDetection.ftl</result>
      <result name="input" type="freemarker">/admin/build/monitoring/editBuildHangingDetection.ftl</result>
      <result name="error" type="freemarker">/admin/build/monitoring/editBuildHangingDetection.ftl</result>
      <result name="success" type="redirect">/admin/buildHangingDetection!read.action</result>
    </action>

    <action name="deleteBuilds" class="com.atlassian.bamboo.ww2.actions.build.admin.DeleteBuilds">
      <result name="input" type="freemarker">/admin/deleteBuilds.ftl</result>
      <result name="success" type="redirect">/admin/deleteBuilds!default.action</result>
      <result name="confirm" type="freemarker">/admin/deleteBuildsConfirmation.ftl</result>
      <result name="error" type="freemarker">/admin/deleteBuilds.ftl</result>
    </action>


    <action name="viewAvailableBulkAction" class="com.atlassian.bamboo.ww2.actions.admin.bulk.BulkPlanAction" method="default">
      <result name="input" type="freemarker">/admin/bulk/viewAvailableBulkAction.ftl</result>
    </action>

    <action name="chooseBulkAction" class="com.atlassian.bamboo.ww2.actions.admin.bulk.BulkPlanAction" method="default">
      <!--<result name="input" type="freemarker">/admin/bulk/viewAvailableBulkAction.ftl</result>-->
      <result name="input" type="freemarker">/admin/bulk/choosePlansForBulkAction.ftl</result>
      <result name="success" type="freemarker">/admin/bulk/choosePlansForBulkAction.ftl</result>
      <result name="error" type="freemarker">/admin/bulk/choosePlansForBulkAction.ftl</result>
    </action>

    <action name="choosePlansForBulkAction" class="com.atlassian.bamboo.ww2.actions.admin.bulk.BulkPlanAction" method="view">
      <result name="input" type="freemarker">/admin/bulk/viewAvailableBulkAction.ftl</result>
      <result name="view" type="freemarker">/admin/bulk/inputFormForBulkAction.ftl</result>
      <result name="success" type="freemarker">/admin/bulk/inputFormForBulkAction.ftl</result>
      <result name="error" type="freemarker">/admin/bulk/choosePlansForBulkAction.ftl</result>
      <result name="back" type="redirect">/admin/viewAvailableBulkAction.action</result>
    </action>

    <action name="confirmBulkAction" class="com.atlassian.bamboo.ww2.actions.admin.bulk.BulkPlanAction" method="confirm">
      <result name="error" type="freemarker">/admin/bulk/inputFormForBulkAction.ftl</result>
      <result name="input" type="freemarker">/admin/bulk/inputFormForBulkAction.ftl</result>
      <result name="confirm" type="freemarker">/admin/bulk/confirmBulkAction.ftl</result>
      <result name="back" type="freemarker">/admin/bulk/choosePlansForBulkAction.ftl</result>
    </action>

    <action name="bulkPlan" class="com.atlassian.bamboo.ww2.actions.admin.bulk.BulkPlanAction">
      <result name="error" type="freemarker">/admin/bulk/resultOfBulkAction.ftl</result>
      <result name="input" type="freemarker">/admin/bulk/resultOfBulkAction.ftl</result>
      <result name="success" type="freemarker">/admin/bulk/resultOfBulkAction.ftl</result>
      <result name="back" type="freemarker">/admin/bulk/inputFormForBulkAction.ftl</result>
    </action>

    <action name="editPlanNotificationSnippet" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildNotification" method="default">
      <!--<interceptor-ref name="buildConfigEdit"/>-->
      <!--<interceptor-ref name="defaultStack"/>-->
      <result name="input" type="freemarker">/build/edit/editBuildNotificationSnippet.ftl</result>
      <result name="error" type="freemarker">/build/edit/editBuildNotificationSnippet.ftl</result>
    </action>

    <action name="editSvnUrlSnippet" class="com.atlassian.bamboo.ww2.BambooActionSupport"
            method="default">
      <result name="input" type="freemarker">/build/edit/editSvnUrlSnippet.ftl</result>
      <result name="error" type="freemarker">/build/edit/editSvnUrlSnippet.ftl</result>
    </action>

    <action name="editSvnCredentialsSnippet" class="com.atlassian.bamboo.ww2.actions.admin.bulk.BulkPlanAction"
            method="default">
      <result name="input" type="freemarker">/build/edit/editSvnCredentialsSnippet.ftl</result>
      <result name="error" type="freemarker">/build/edit/editSvnCredentialsSnippet.ftl</result>
    </action>

    <action name="editCvsRootCredentialsSnippet" class="com.atlassian.bamboo.ww2.actions.admin.bulk.BulkPlanAction"
            method="default">
      <result name="input" type="freemarker">/build/edit/editCvsRootCredentialsSnippet.ftl</result>
      <result name="error" type="freemarker">/build/edit/editCvsRootCredentialsSnippet.ftl</result>
    </action>

    <action name="editCvsModuleSnippet" class="com.atlassian.bamboo.ww2.actions.admin.bulk.BulkPlanAction"
            method="default">
      <result name="input" type="freemarker">/build/edit/editCvsModuleSnippet.ftl</result>
      <result name="error" type="freemarker">/build/edit/editCvsModuleSnippet.ftl</result>
    </action>

    <action name="editWebUrlSnippet" class="com.atlassian.bamboo.ww2.BambooActionSupport"
            method="default">
      <result name="input" type="freemarker">/build/edit/editWebUrlSnippet.ftl</result>
      <result name="error" type="freemarker">/build/edit/editWebUrlSnippet.ftl</result>
    </action>

    <action name="editManualBuildSnippet" class="com.atlassian.bamboo.ww2.actions.admin.bulk.BulkPlanAction"
            method="default">
      <result name="input" type="freemarker">/build/edit/editManualBuildSnippet.ftl</result>
      <result name="error" type="freemarker">/build/edit/editManualBuildSnippet.ftl</result>
    </action>

    <action name="viewMailServer" class="com.atlassian.bamboo.ww2.actions.admin.mail.ConfigureMailServer" method="default">
      <interceptor-ref name="globalAdminStack"/>
      <result name="input" type="freemarker">/admin/mail/viewMailServer.ftl</result>
      <result name="success" type="freemarker">/admin/mail/viewMailServer.ftl</result>
      <result name="error" type="freemarker">/admin/mail/viewMailServer.ftl</result>
    </action>

    <action name="configureMailServer" class="com.atlassian.bamboo.ww2.actions.admin.mail.ConfigureMailServer" method="edit">
      <interceptor-ref name="globalAdminStack"/>
      <result name="success" type="freemarker">/admin/mail/configureMailServer.ftl</result>
      <result name="input" type="freemarker">/admin/mail/viewMailServer.ftl</result>
      <result name="error" type="freemarker">/admin/mail/configureMailServer.ftl</result>
    </action>

    <action name="saveMailServer" class="com.atlassian.bamboo.ww2.actions.admin.mail.ConfigureMailServer" method="save">
      <interceptor-ref name="globalAdminStack"/>
      <result name="input" type="freemarker">/admin/mail/configureMailServer.ftl</result>
      <result name="success" type="redirect">/admin/viewMailServer.action</result>
      <result name="error" type="freemarker">/admin/mail/configureMailServer.ftl</result>
    </action>

    <action name="deleteMailServer" class="com.atlassian.bamboo.ww2.actions.admin.mail.ConfigureMailServer" method="delete">
      <interceptor-ref name="globalAdminStack"/>
      <result name="success" type="redirect">/admin/viewMailServer.action</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>

    <action name="viewSystemNotifications" class="com.atlassian.bamboo.ww2.actions.admin.notification.ConfigureSystemNotifications" method="default">
      <result name="input" type="freemarker">/admin/notification/viewSystemNotifications.ftl</result>
    </action>

    <action name="editSystemNotification" class="com.atlassian.bamboo.ww2.actions.admin.notification.ConfigureSystemNotifications" method="edit">
      <result name="input" type="freemarker">/admin/notification/updateSystemNotification.ftl</result>
      <result name="error" type="freemarker">/admin/notification/updateSystemNotification.ftl</result>
    </action>

    <action name="updateSystemNotification" class="com.atlassian.bamboo.ww2.actions.admin.notification.ConfigureSystemNotifications" method="update">
      <result name="input" type="freemarker">/admin/notification/updateSystemNotification.ftl</result>
      <result name="error" type="freemarker">/admin/notification/updateSystemNotification.ftl</result>
      <result name="success" type="redirect">/admin/viewSystemNotifications.action?lastModified=${lastModified}</result>
    </action>

    <action name="removeSystemNotification" class="com.atlassian.bamboo.ww2.actions.admin.notification.ConfigureSystemNotifications" method="delete">
      <result name="error" type="freemarker">/admin/notification/viewSystemNotifications.ftl</result>
      <result name="success" type="redirect">/admin/viewSystemNotifications.action</result>
    </action>

    <action name="addSystemNotification" class="com.atlassian.bamboo.ww2.actions.admin.notification.ConfigureSystemNotifications" method="add">
      <result name="input" type="freemarker">/admin/notification/viewSystemNotifications.ftl</result>
      <result name="error" type="freemarker">/admin/notification/viewSystemNotifications.ftl</result>
      <result name="success" type="redirect">/admin/viewSystemNotifications.action?lastModified=${lastModified}&amp;conditionKey=${conditionKey}&amp;notificationRecipientType=${notificationRecipientType}&amp;previousTypeData=${previousTypeData}</result>
      <result name="cancel" type="redirect">/admin/viewSystemNotifications.action</result>
    </action>

    <action name="viewGadgetUrls" class="com.atlassian.bamboo.ww2.actions.admin.gadgets.ViewGadgetUrls" method="default">
      <result name="input" type="freemarker">/admin/gadgets/viewGadgetUrls.ftl</result>
      <result name="error" type="freemarker">/admin/gadgets/viewGadgetUrls.ftl</result>
    </action>

    <action name="viewBackups" class="com.atlassian.bamboo.ww2.actions.admin.migration.Backup" method="default">
      <interceptor-ref name="globalAdminStack"/>
      <result name="input" type="freemarker">/admin/backups/configureBackups.ftl</result>
      <result name="view" type="freemarker">/admin/backups/viewBackups.ftl</result>
      <result name="error" type="freemarker">/admin/backups/viewBackups.ftl</result>
    </action>

    <action name="configureBackups" class="com.atlassian.bamboo.ww2.actions.admin.migration.Backup" method="edit">
      <interceptor-ref name="globalAdminStack"/>
      <result name="input" type="freemarker">/admin/backups/configureBackups.ftl</result>
      <result name="error" type="freemarker">/admin/backups/configureBackups.ftl</result>
    </action>

    <action name="saveBackups" class="com.atlassian.bamboo.ww2.actions.admin.migration.Backup" method="save">
      <interceptor-ref name="globalAdminStack"/>
      <result name="error" type="freemarker">/admin/backups/configureBackups.ftl</result>
      <result name="input" type="freemarker">/admin/backups/configureBackups.ftl</result>
      <result name="success" type="redirect">/admin/viewBackups.action</result>
    </action>

    <action name="import" class="com.atlassian.bamboo.ww2.actions.admin.migration.Import">
      <interceptor-ref name="globalAdminStack"/>
      <result name="input" type="freemarker">/admin/import.ftl</result>
      <result name="confirm" type="freemarker">/admin/importConfirmation.ftl</result>
      <result name="success" type="redirect">/start.action</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>

    <action name="export" class="com.atlassian.bamboo.ww2.actions.admin.migration.Export">
      <interceptor-ref name="globalAdminStack"/>
      <result name="input" type="freemarker">/admin/export.ftl</result>
      <result name="success" type="freemarker">/admin/export.ftl</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>

    <action name="viewBambooInternals" class="com.atlassian.bamboo.ww2.actions.admin.ViewBambooInternals">
      <result name="success" type="freemarker">/admin/system/viewBambooInternals.ftl</result>
    </action>


  </package>

  <package name="adminAjax" extends="admin" namespace="/admin/ajax">
    <!-- no actions yet -->
  </package>
  <!-- =============================================================================================== Builder Admin -->
  <!-- ============================================================================================== Elastic Bamboo -->

  <package name="elastic" extends="admin" namespace="/admin/elastic">
    <action name="configureElasticCapabilities" class="com.atlassian.bamboo.ww2.actions.admin.elastic.ConfigureElasticCapability" method="default">
      <result name="input" type="freemarker">/admin/elastic/image/configuration/viewElasticImageConfiguration.ftl</result>
    </action>

    <action name="addElasticCapability" class="com.atlassian.bamboo.ww2.actions.admin.elastic.ConfigureElasticCapability" method="addCapability">
      <result name="input" type="freemarker">/admin/elastic/image/configuration/viewElasticImageConfiguration.ftl</result>
      <result name="error" type="freemarker">/admin/elastic/image/configuration/viewElasticImageConfiguration.ftl</result>
      <result name="success" type="redirect">/admin/elastic/configureElasticCapabilities.action?configurationId=${configurationId}</result>
    </action>

    <action name="deleteElasticCapability" class="com.atlassian.bamboo.ww2.actions.admin.elastic.ConfigureElasticCapability" method="removeCapability">
      <result name="input" type="freemarker">/admin/elastic/image/configuration/viewElasticImageConfiguration.ftl</result>
      <result name="error" type="freemarker">/admin/elastic/image/configuration/viewElasticImageConfiguration.ftl</result>
      <result name="success" type="redirect">/admin/elastic/configureElasticCapabilities.action?configurationId=${configurationId}</result>
    </action>

    <action name="editElasticCapability" class="com.atlassian.bamboo.ww2.actions.admin.elastic.EditElasticCapability" method="default">
      <result name="input" type="freemarker">/admin/elastic/editElasticCapability.ftl</result>
    </action>

    <action name="updateElasticCapability" class="com.atlassian.bamboo.ww2.actions.admin.elastic.EditElasticCapability" method="editCapability">
      <result name="input" type="freemarker">/admin/elastic/editElasticCapability.ftl</result>
      <result name="success" type="redirect">/admin/elastic/configureElasticCapabilities.action?configurationId=${configurationId}</result>
    </action>

    <action name="reloadDefaultCapabilities" class="com.atlassian.bamboo.ww2.actions.admin.elastic.ConfigureElasticCapability" method="reloadDefaultCapabilities">
      <result name="input" type="freemarker">/admin/elastic/editElasticCapability.ftl</result>
      <result name="success" type="redirect">/admin/elastic/configureElasticCapabilities.action?configurationId=${configurationId}</result>
    </action>

    <action name="manageElasticInstances" class="com.atlassian.bamboo.ww2.actions.admin.elastic.ManageElasticInstancesAction" method="view">
      <result name="input" type="freemarker">/admin/elastic/manageElasticInstances.ftl</result>
      <result name="success" type="freemarker">/admin/elastic/manageElasticInstances.ftl</result>
      <result name="error" type="freemarker">/admin/elastic/manageElasticInstances.ftl</result>
    </action>

    <action name="allElasticInstances" class="com.atlassian.bamboo.ww2.actions.admin.elastic.AllElasticInstancesAction">
      <result name="input" type="freemarker">/admin/elastic/allElasticInstances.ftl</result>
      <result name="success" type="freemarker">/admin/elastic/allElasticInstances.ftl</result>
      <result name="error" type="freemarker">/admin/elastic/allElasticInstances.ftl</result>
    </action>

    <action name="prepareElasticInstances" class="com.atlassian.bamboo.ww2.actions.admin.elastic.ManageElasticInstancesAction" method="prepareCreate">
      <result name="input" type="freemarker">/admin/elastic/createElasticInstances.ftl</result>
      <result name="error" type="freemarker">/admin/elastic/createElasticInstances.ftl</result>
    </action>

    <action name="createElasticInstances" class="com.atlassian.bamboo.ww2.actions.admin.elastic.ManageElasticInstancesAction" method="create">
      <result name="input" type="freemarker">/admin/elastic/createElasticInstances.ftl</result>
      <result name="error" type="freemarker">/admin/elastic/createElasticInstances.ftl</result>
      <result name="success" type="redirect">/admin/elastic/manageElasticInstances.action</result>
    </action>

    <action name="shutdownAllElasticInstances" class="com.atlassian.bamboo.ww2.actions.admin.elastic.ManageElasticInstancesAction" method="shutdownAllInstances">
      <result name="input" type="freemarker">/admin/elastic/shutdownElasticInstance.ftl</result>
      <result name="error" type="freemarker">/admin/elastic/shutdownElasticInstance.ftl</result>
      <result name="success" type="redirect">/admin/elastic/manageElasticInstances.action</result>
    </action>

    <action name="shutdownElasticInstance" class="com.atlassian.bamboo.ww2.actions.admin.elastic.ManageElasticInstancesAction" method="shutdownInstance">
      <result name="input" type="freemarker">/admin/elastic/shutdownElasticInstance.ftl</result>
      <result name="error" type="freemarker">/admin/elastic/shutdownElasticInstance.ftl</result>
      <result name="success" type="redirect">/admin/elastic/manageElasticInstances.action</result>
    </action>

    <action name="shutdownDisconnectedElasticInstance" class="com.atlassian.bamboo.ww2.actions.admin.elastic.AllElasticInstancesAction" method="shutdownDisconnectedInstance">
      <result name="error" type="freemarker">/admin/elastic/allElasticInstances.ftl</result>
      <result name="success" type="redirect">/admin/elastic/allElasticInstances.action</result>
    </action>

    <action name="shutdownAllDisconnectedElasticInstances" class="com.atlassian.bamboo.ww2.actions.admin.elastic.AllElasticInstancesAction" method="shutdownAllDisconnectedInstances">
      <result name="error" type="freemarker">/admin/elastic/allElasticInstances.ftl</result>
      <result name="success" type="redirect">/admin/elastic/allElasticInstances.action</result>
    </action>

    <action name="deleteEbsVolume" class="com.atlassian.bamboo.ww2.actions.admin.elastic.AllElasticInstancesAction" method="deleteEbsVolume">
      <result name="error" type="freemarker">/admin/elastic/allElasticInstances.ftl</result>
      <result name="success" type="redirect">/admin/elastic/allElasticInstances.action</result>
    </action>

    <action name="deleteAllDetachedEbsVolumes" class="com.atlassian.bamboo.ww2.actions.admin.elastic.AllElasticInstancesAction" method="deleteAllDetachedEbsVolumes">
      <result name="error" type="freemarker">/admin/elastic/allElasticInstances.ftl</result>
      <result name="success" type="redirect">/admin/elastic/allElasticInstances.action</result>
    </action>

    <action name="viewElasticConfig" class="com.atlassian.bamboo.ww2.actions.admin.elastic.ConfigureElasticCloudAction" method="read">
      <result name="input" type="freemarker">/admin/elastic/viewConfigureElasticCloud.ftl</result>
      <result name="success" type="freemarker">/admin/elastic/viewConfigureElasticCloud.ftl</result>
      <result name="error" type="freemarker">/admin/elastic/viewConfigureElasticCloud.ftl</result>
    </action>

    <action name="editElasticConfig" class="com.atlassian.bamboo.ww2.actions.admin.elastic.ConfigureElasticCloudAction" method="edit">
      <result name="success" type="freemarker">/admin/elastic/editConfigureElasticCloud.ftl</result>
      <result name="input" type="freemarker">/admin/elastic/editConfigureElasticCloud.ftl</result>
      <result name="error" type="freemarker">/admin/elastic/editConfigureElasticCloud.ftl</result>
    </action>

    <action name="saveElasticConfig" class="com.atlassian.bamboo.ww2.actions.admin.elastic.ConfigureElasticCloudAction" method="save">
      <result name="input" type="freemarker">/admin/elastic/editConfigureElasticCloud.ftl</result>
      <result name="error" type="freemarker">/admin/elastic/editConfigureElasticCloud.ftl</result>
      <result name="success" type="redirect">/admin/elastic/viewElasticConfig.action?showHint=true</result>
    </action>

    <action name="disableElasticConfig" class="com.atlassian.bamboo.ww2.actions.admin.elastic.ConfigureElasticCloudAction" method="disable">
      <result name="success" type="redirect">/admin/elastic/viewElasticConfig.action</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>

     <action name="confirmDisableElasticConfig" class="com.atlassian.bamboo.ww2.actions.admin.elastic.ConfigureElasticCloudAction" method="confirmDisable">
      <result name="input" type="freemarker">/admin/elastic/confirmDisableElasticConfig.ftl</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>

    <action name="enableElasticConfig" class="com.atlassian.bamboo.ww2.actions.admin.elastic.ConfigureElasticCloudAction" method="enable">
      <result name="success" type="redirect">/admin/elastic/editElasticConfig.action</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>

    <action name="viewElasticInstance" class="com.atlassian.bamboo.ww2.actions.admin.elastic.ViewElasticInstanceAction" method="default">
      <result name="input" type="freemarker">/admin/elastic/viewElasticInstance.ftl</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>

    <action name="viewElasticAgentHistory" class="com.atlassian.bamboo.ww2.actions.admin.elastic.ViewElasticAgentHistoryAction">
      <result name="input" type="freemarker">/admin/elastic/viewElasticAgentHistory.ftl</result>
      <result name="success" type="freemarker">/admin/elastic/viewElasticAgentHistory.ftl</result>
      <result name="error" type="freemarker">error.ftl</result>
    </action>

    <action name="deleteAgentHistory" class="com.atlassian.bamboo.ww2.actions.admin.elastic.ViewElasticAgentHistoryAction" method="deleteHistory">
      <result name="input" type="freemarker">/admin/elastic/viewElasticAgentHistory.ftl</result>
      <result name="success" type="redirect">/admin/elastic/viewElasticAgentHistory.action</result>
      <result name="error" type="freemarker">error.ftl</result>
    </action>

    <action name="getPkFile" class="com.atlassian.bamboo.ww2.actions.admin.elastic.GetPkFileAction">
      <result name="success" type="stream">
        <param name="contentLength">${contentLength}</param>
        <param name="contentType">application/octet-stream</param>
        <param name="contentDisposition">attachment;filename=${filename}</param>
      </result>
    </action>

  </package>

  <!-- ElasticInstanceSchedule CRUD + List -->
  <package name="elasticInstanceSchedule" extends="elastic" namespace="/admin/elastic/schedule">

    <action name="viewElasticInstanceSchedules" class="com.atlassian.bamboo.ww2.actions.admin.elastic.schedule.ConfigureElasticInstanceSchedules" method="list">
      <result name="error" type="freemarker">/admin/elastic/schedule/viewElasticInstanceSchedules.ftl</result>
      <result name="success" type="freemarker">/admin/elastic/schedule/viewElasticInstanceSchedules.ftl</result>
    </action>

    <action name="disableAllElasticInstanceSchedules" class="com.atlassian.bamboo.ww2.actions.admin.elastic.schedule.ConfigureElasticInstanceSchedules" method="disableAll">
      <result name="error" type="freemarker">/admin/elastic/schedule/viewElasticInstanceSchedules.ftl</result>
      <result name="success" type="redirect">/admin/elastic/schedule/viewElasticInstanceSchedules.action</result>
    </action>

    <action name="enableAllElasticInstanceSchedules" class="com.atlassian.bamboo.ww2.actions.admin.elastic.schedule.ConfigureElasticInstanceSchedules" method="enableAll">
      <result name="error" type="freemarker">/admin/elastic/schedule/viewElasticInstanceSchedules.ftl</result>
      <result name="success" type="redirect">/admin/elastic/schedule/viewElasticInstanceSchedules.action</result>
    </action>

    <!--<action name="viewElasticInstanceSchedule" class="com.atlassian.bamboo.ww2.actions.admin.elastic.ConfigureElasticInstanceScheduleule" method="read">-->
      <!--<result name="error" type="freemarker">/admin/elastic/schedule/viewElasticInstanceSchedule.ftl</result>-->
      <!--<result name="success" type="freemarker">/admin/elastic/schedule/viewElasticInstanceSchedule.ftl</result>-->
    <!--</action>-->

    <action name="addElasticInstanceSchedule" class="com.atlassian.bamboo.ww2.actions.admin.elastic.schedule.ConfigureElasticInstanceSchedule" method="add">
      <result name="success" type="freemarker">/admin/elastic/schedule/editElasticInstanceSchedule.ftl</result>
    </action>

    <action name="editElasticInstanceSchedule" class="com.atlassian.bamboo.ww2.actions.admin.elastic.schedule.ConfigureElasticInstanceSchedule" method="edit">
      <result name="success" type="freemarker">/admin/elastic/schedule/editElasticInstanceSchedule.ftl</result>
    </action>

    <action name="saveElasticInstanceSchedule" class="com.atlassian.bamboo.ww2.actions.admin.elastic.schedule.ConfigureElasticInstanceSchedule" method="save">
      <result name="input" type="freemarker">/admin/elastic/schedule/editElasticInstanceSchedule.ftl</result>
      <result name="error" type="freemarker">/admin/elastic/schedule/editElasticInstanceSchedule.ftl</result>
      <result name="success" type="redirect">/admin/elastic/schedule/viewElasticInstanceSchedules.action?elasticInstanceScheduleId=${elasticInstanceScheduleId}</result>
    </action>

    <action name="copyElasticInstanceSchedule" class="com.atlassian.bamboo.ww2.actions.admin.elastic.schedule.ConfigureElasticInstanceSchedule" method="copy">
      <result name="error" type="chain">viewElasticInstanceSchedules</result>
      <result name="success" type="freemarker">/admin/elastic/schedule/editElasticInstanceSchedule.ftl</result>
    </action>

    <action name="enableElasticInstanceSchedule" class="com.atlassian.bamboo.ww2.actions.admin.elastic.schedule.ConfigureElasticInstanceSchedule" method="enable">
      <result name="error" type="chain">viewElasticInstanceSchedules</result>
      <result name="success" type="redirect">/admin/elastic/schedule/viewElasticInstanceSchedules.action?elasticInstanceScheduleId=${elasticInstanceScheduleId}</result>
    </action>

    <action name="disableElasticInstanceSchedule" class="com.atlassian.bamboo.ww2.actions.admin.elastic.schedule.ConfigureElasticInstanceSchedule" method="disable">
      <result name="error" type="chain">viewElasticInstanceSchedules</result>
      <result name="success" type="redirect">/admin/elastic/schedule/viewElasticInstanceSchedules.action?elasticInstanceScheduleId=${elasticInstanceScheduleId}</result>
    </action>

    <action name="deleteElasticInstanceSchedule" class="com.atlassian.bamboo.ww2.actions.admin.elastic.schedule.ConfigureElasticInstanceSchedule" method="delete">
      <result name="input" type="freemarker">/admin/elastic/schedule/confirmDeleteElasticInstanceSchedule.ftl</result>
      <result name="success" type="redirect">/admin/elastic/schedule/viewElasticInstanceSchedules.action?elasticInstanceScheduleId=${elasticInstanceScheduleId}</result>
    </action>

  </package>


  <package name="elasticImageConfiguration" extends="elastic" namespace="/admin/elastic/image/configuration">

    <action name="viewElasticImageConfigurations" class="com.atlassian.bamboo.ww2.actions.admin.elastic.ConfigureElasticImageConfiguration" method="list">
      <result name="error" type="freemarker">/admin/elastic/image/configuration/listElasticImageConfigurations.ftl</result>
      <result name="success" type="freemarker">/admin/elastic/image/configuration/listElasticImageConfigurations.ftl</result>
    </action>

    <action name="viewElasticImageConfiguration" class="com.atlassian.bamboo.ww2.actions.admin.elastic.ConfigureElasticImageConfiguration" method="view">
      <result name="success" type="freemarker">/admin/elastic/image/configuration/viewElasticImageConfiguration.ftl</result>
    </action>

    <action name="createElasticImageConfiguration" class="com.atlassian.bamboo.ww2.actions.admin.elastic.ConfigureElasticImageConfiguration" method="create">
      <result name="error" type="freemarker">/admin/elastic/image/configuration/listElasticImageConfigurations.ftl</result>
      <result name="input" type="freemarker">/admin/elastic/image/configuration/listElasticImageConfigurations.ftl</result>
      <result name="success" type="redirect">/admin/elastic/image/configuration/viewElasticImageConfigurations.action</result>
    </action>

    <action name="editElasticImageConfiguration" class="com.atlassian.bamboo.ww2.actions.admin.elastic.ConfigureElasticImageConfiguration" method="edit">
      <result name="input" type="freemarker">/admin/elastic/image/configuration/editElasticImageConfiguration.ftl</result>
    </action>

    <action name="disableElasticImageConfiguration" class="com.atlassian.bamboo.ww2.actions.admin.elastic.ConfigureElasticImageConfiguration" method="disable">
      <result name="input" type="freemarker">/admin/elastic/image/configuration/disableElasticImageConfigurationConfirmation.ftl</result>
      <result name="success" type="redirect">/admin/elastic/image/configuration/viewElasticImageConfigurations.action</result>
      <result name="error" type="freemarker">/admin/elastic/image/configuration/listElasticImageConfigurations.ftl</result>
    </action>

    <action name="enableElasticImageConfiguration" class="com.atlassian.bamboo.ww2.actions.admin.elastic.ConfigureElasticImageConfiguration" method="enable">
      <result name="success" type="redirect">/admin/elastic/image/configuration/viewElasticImageConfigurations.action</result>
      <result name="error" type="freemarker">/admin/elastic/image/configuration/listElasticImageConfigurations.ftl</result>
    </action>

    <action name="saveElasticImageConfiguration" class="com.atlassian.bamboo.ww2.actions.admin.elastic.ConfigureElasticImageConfiguration" method="save">
      <result name="input" type="freemarker">/admin/elastic/image/configuration/editElasticImageConfiguration.ftl</result>
      <result name="error" type="freemarker">/admin/elastic/image/configuration/editElasticImageConfiguration.ftl</result>
      <result name="success" type="redirect">/admin/elastic/image/configuration/viewElasticImageConfigurations.action</result>
    </action>

    <action name="deleteElasticImageConfiguration" class="com.atlassian.bamboo.ww2.actions.admin.elastic.ConfigureElasticImageConfiguration" method="delete">
      <result name="input" type="freemarker">/admin/elastic/image/configuration/deleteElasticImageConfigurationConfirmation.ftl</result>
      <result name="success" type="redirect">/admin/elastic/image/configuration/viewElasticImageConfigurations.action</result>
      <result name="error" type="freemarker">/admin/elastic/image/configuration/listElasticImageConfigurations.ftl</result>
    </action>

    <action name="viewElasticInstancesForConfiguration" class="com.atlassian.bamboo.ww2.actions.admin.elastic.ViewInstancesForConfigurationAction" method="view">
      <result name="success" type="freemarker">/admin/elastic/image/configuration/listActiveInstancesForConfiguration.ftl</result>
      <result name="error" type="freemarker">/admin/elastic/image/configuration/listActiveInstancesForConfiguration.ftl</result>
    </action>

    <action name="shutdownElasticInstancesForConfiguration" class="com.atlassian.bamboo.ww2.actions.admin.elastic.ViewInstancesForConfigurationAction" method="shutdownAll">
      <result name="success" type="redirect">/admin/elastic/manageElasticInstances.action</result>
      <result name="input" type="freemarker">/admin/elastic/image/configuration/shutdownElasticInstanceForConfigurationConfirm.ftl</result>
      <result name="error" type="freemarker">/admin/elastic/image/configuration/shutdownElasticInstanceForConfigurationConfirm.ftl</result>
    </action>

  </package>


  <!-- ================================================================================================ User Admin -->
  <package name="userAdmin" extends="admin" namespace="/admin/user">
    <global-results>
      <result name="input" type="freemarker">/admin/user/configureUser.ftl</result>
      <result name="error" type="freemarker">/admin/user/configureUser.ftl</result>
      <result name="success" type="redirect">viewUsers.action?affectedUsername=${username}</result>
    </global-results>

    <action name="viewUsers" class="com.atlassian.bamboo.ww2.actions.admin.user.ConfigureUser" method="default">
      <interceptor-ref name="globalAdminStack"/>
      <result name="input" type="freemarker">/admin/user/viewUsers.ftl</result>
    </action>

    <action name="addUser" class="com.atlassian.bamboo.ww2.actions.admin.user.ConfigureUser" method="default">
      <interceptor-ref name="globalAdminStack"/>
    </action>
    <action name="createUser" class="com.atlassian.bamboo.ww2.actions.admin.user.ConfigureUser" method="create">
      <interceptor-ref name="globalAdminStack"/>
      <result name="error" type="freemarker">/admin/user/viewUsers.ftl</result>
      <result name="input" type="freemarker">/admin/user/viewUsers.ftl</result>
    </action>
    <action name="editUser" class="com.atlassian.bamboo.ww2.actions.admin.user.ConfigureUser" method="edit">
      <interceptor-ref name="globalAdminStack"/>
      <result name="error" type="freemarker">/error/accessDenied.ftl</result>
      <param name="mode">edit</param>
    </action>
    <action name="updateUser" class="com.atlassian.bamboo.ww2.actions.admin.user.ConfigureUser" method="update">
      <interceptor-ref name="globalAdminStack"/>
      <result name="error" type="freemarker">/error/accessDenied.ftl</result>
    </action>
    <action name="updateExternalUser" class="com.atlassian.bamboo.ww2.actions.admin.user.ConfigureUser" method="update">
      <interceptor-ref name="globalAdminStack"/>
    </action>
    <action name="deleteUser" class="com.atlassian.bamboo.ww2.actions.admin.user.ConfigureUser" method="delete">
      <interceptor-ref name="globalAdminStack"/>
      <result name="error" type="freemarker">/admin/user/viewUsers.ftl</result>
      <result name="input" type="freemarker">/admin/user/viewUsers.ftl</result>
    </action>

    <action name="browseUsers" class="com.atlassian.bamboo.ww2.actions.admin.user.SearchUserAction" method="browse">
      <result name="input" type="freemarker">/admin/user/viewPaginatedUsers.ftl</result>
      <result name="success" type="freemarker">/admin/user/viewPaginatedUsers.ftl</result>
    </action>

    <action name="searchUsers" class="com.atlassian.bamboo.ww2.actions.admin.user.SearchUserAction" method="search">
      <result name="input" type="freemarker">/admin/user/viewSearchUsers.ftl</result>
      <result name="success" type="freemarker">/admin/user/viewSearchUsers.ftl</result>
      <result name="error" type="freemarker">/admin/user/viewSearchUsers.ftl</result>
    </action>


    <action name="userPickerSearch" class="com.atlassian.bamboo.ww2.actions.admin.user.UserPickerAction" method="search">
      <result name="input" type="freemarker">/admin/user/userPickerResults.ftl</result>
      <result name="success" type="freemarker">/admin/user/userPickerResults.ftl</result>
    </action>

    <action name="userPicker" class="com.atlassian.bamboo.ww2.actions.admin.user.UserPickerAction" method="default">
      <result name="input" type="freemarker">/admin/user/userPicker.ftl</result>
      <result name="success" type="freemarker">/admin/user/userPicker.ftl</result>
    </action>

  </package>


  <!-- ================================================================================================= Group Admin -->
  <package name="groupAdmin" extends="admin" namespace="/admin/group">
    <global-results>
      <result name="input" type="freemarker">/admin/group/configureGroup.ftl</result>
      <result name="error" type="freemarker">/admin/group/configureGroup.ftl</result>
      <result name="success" type="redirect">viewGroups.action?affectedGroupName=${groupName}</result>
    </global-results>

    <action name="viewGroups" class="com.atlassian.bamboo.ww2.actions.admin.group.ConfigureGroup" method="default">
      <interceptor-ref name="globalAdminStack"/>
      <result name="input" type="freemarker">/admin/group/viewGroups.ftl</result>
    </action>

    <action name="addGroup" class="com.atlassian.bamboo.ww2.actions.admin.group.ConfigureGroup" method="default">
      <interceptor-ref name="globalAdminStack"/>
    </action>
    <action name="createGroup" class="com.atlassian.bamboo.ww2.actions.admin.group.ConfigureGroup" method="create">
      <interceptor-ref name="globalAdminStack"/>
      <result name="error" type="freemarker">/admin/group/viewGroups.ftl</result>
      <result name="input" type="freemarker">/admin/group/viewGroups.ftl</result>
    </action>
    <action name="editGroup" class="com.atlassian.bamboo.ww2.actions.admin.group.ConfigureGroup" method="edit">
      <interceptor-ref name="globalAdminStack"/>
      <param name="mode">edit</param>
      <result name="error" type="freemarker">/error/accessDenied.ftl</result>
    </action>
    <action name="updateGroup" class="com.atlassian.bamboo.ww2.actions.admin.group.ConfigureGroup" method="update">
      <interceptor-ref name="globalAdminStack"/>
      <param name="mode">edit</param>
      <result name="error" type="freemarker">/error/accessDenied.ftl</result>
    </action>
    <action name="deleteGroup" class="com.atlassian.bamboo.ww2.actions.admin.group.ConfigureGroup" method="delete">
      <interceptor-ref name="globalAdminStack"/>
      <result name="error" type="freemarker">/admin/group/viewGroups.ftl</result>
      <result name="input" type="freemarker">/admin/group/viewGroups.ftl</result>
    </action>

    <action name="browseGroups" class="com.atlassian.bamboo.ww2.actions.admin.group.BrowseGroupsAction"  method="browse">
      <result name="success" type="freemarker">/admin/group/viewPaginatedGroups.ftl</result>
    </action>
  </package>


  <!-- ============================================================================================= IM Server Admin -->
  <package name="instantMessagingServerAdmin" extends="admin" namespace="/admin/instantmessagingserver">
    <global-results>
      <result name="input" type="freemarker">/admin/instantmessagingserver/configureInstantMessagingServer.ftl</result>
      <result name="error" type="freemarker">/admin/instantmessagingserver/configureInstantMessagingServer.ftl</result>
      <result name="success" type="redirect">/admin/instantmessagingserver/viewInstantMessagingServer.action</result>
    </global-results>

    <action name="viewInstantMessagingServer" class="com.atlassian.bamboo.ww2.actions.admin.instantmessagingserver.ConfigureInstantMessagingServer" method="default">
      <result name="input" type="freemarker">/admin/instantmessagingserver/viewInstantMessagingServer.ftl</result>
    </action>

    <action name="addInstantMessagingServer" class="com.atlassian.bamboo.ww2.actions.admin.instantmessagingserver.ConfigureInstantMessagingServer" method="default"></action>
    <action name="createInstantMessagingServer" class="com.atlassian.bamboo.ww2.actions.admin.instantmessagingserver.ConfigureInstantMessagingServer" method="create"></action>
    <action name="editInstantMessagingServer" class="com.atlassian.bamboo.ww2.actions.admin.instantmessagingserver.ConfigureInstantMessagingServer" method="edit">
      <result name="input" type="freemarker">/admin/instantmessagingserver/viewInstantMessagingServer.ftl</result>
      <result name="success" type="freemarker">/admin/instantmessagingserver/configureInstantMessagingServer.ftl</result>
    </action>
    <action name="deleteInstantMessagingServer" class="com.atlassian.bamboo.ww2.actions.admin.instantmessagingserver.ConfigureInstantMessagingServer" method="delete"></action>
  </package>


  <!-- ============================================================================================= JIRA Server Admin -->
  <package name="jiraServerAdmin" extends="admin" namespace="/admin/jiraserver">
    <default-interceptor-ref name="globalAdminStack"/>
    <global-results>
      <result name="input" type="freemarker">/admin/jiraserver/configureJiraServer.ftl</result>
      <result name="error" type="freemarker">/admin/jiraserver/configureJiraServer.ftl</result>
      <result name="success" type="redirect">/admin/jiraserver/viewJiraServers.action</result>
    </global-results>

    <!-- view action -->
    <action name="viewJiraServers" class="com.atlassian.bamboo.ww2.actions.admin.jiraserver.ConfigureJiraServer" method="default">
      <result name="input" type="freemarker">/admin/jiraserver/viewJiraServers.ftl</result>
    </action>

    <!-- input actions -->
    <action name="newJiraServer" class="com.atlassian.bamboo.ww2.actions.admin.jiraserver.ConfigureJiraServer" method="default"></action>
    <action name="editJiraServer" class="com.atlassian.bamboo.ww2.actions.admin.jiraserver.ConfigureJiraServer" method="edit">
      <result name="input" type="freemarker">/admin/jiraserver/viewJiraServers.ftl</result>
      <result name="success" type="freemarker">/admin/jiraserver/configureJiraServer.ftl</result>
    </action>

    <!-- execute actions -->
    <action name="saveJiraServer" class="com.atlassian.bamboo.ww2.actions.admin.jiraserver.ConfigureJiraServer" method="save"></action>
    <action name="deleteJiraServer" class="com.atlassian.bamboo.ww2.actions.admin.jiraserver.ConfigureJiraServer" method="delete"></action>
  </package>


  <!-- ======================================================================================= Build Admin Actions -->
  <package name="buildAdmin" extends="default" namespace="/build/admin">
    <default-interceptor-ref name="defaultStack"/>
    <global-results>
      <result name="cancel" type="redirect">/start.action</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </global-results>


    <action name="viewCvsRootCredentials" class="com.atlassian.bamboo.ww2.actions.build.admin.ViewBuildConfiguration">
      <result name="success" type="freemarker">/build/view/viewCvsRootCredentials.ftl</result>
    </action>

    <action name="viewCvsModule" class="com.atlassian.bamboo.ww2.actions.build.admin.ViewBuildConfiguration">
      <result name="success" type="freemarker">/build/view/viewCvsModule.ftl</result>
    </action>

    <action name="viewWebUrl" class="com.atlassian.bamboo.ww2.actions.build.admin.ViewBuildConfiguration">
      <result name="success" type="freemarker">/build/view/viewWebUrl.ftl</result>
    </action>

    <action name="viewPlanNotifications" class="com.atlassian.bamboo.ww2.actions.build.admin.ViewBuildConfiguration">
      <result name="success" type="freemarker">/build/view/viewNotifications.ftl</result>
    </action>

    <action name="viewCurrentBulkBuild" class="com.atlassian.bamboo.build.GotoBuildResult">
      <result name="success" type="freemarker">/build/view/viewCurrentBulkBuild.ftl</result>
    </action>

    <action name="confirmDeleteAllNotifications" class="com.atlassian.bamboo.ww2.actions.admin.bulk.BulkPlanAction" method="confirm">
      <result name="confirm" type="freemarker">/build/view/confirmDeleteAllNotifications.ftl</result>
    </action>

    <action name="viewUpdatedNotifications" class="com.atlassian.bamboo.ww2.actions.admin.bulk.BulkPlanAction" method="confirm">
      <result name="confirm" type="freemarker">/build/view/viewUpdatedNotifications.ftl</result>
    </action>

    <action name="viewUpdatedSvnUrl" class="com.atlassian.bamboo.ww2.actions.admin.bulk.BulkPlanAction" method="confirm">
      <result name="confirm" type="freemarker">/build/view/viewUpdatedSvnUrl.ftl</result>
    </action>

    <action name="viewUpdatedSvnCredentials" class="com.atlassian.bamboo.ww2.actions.admin.bulk.BulkPlanAction" method="confirm">
      <result name="confirm" type="freemarker">/build/view/viewUpdatedSvnCredentials.ftl</result>
    </action>

    <action name="viewUpdatedCvsRootCredentials" class="com.atlassian.bamboo.ww2.actions.admin.bulk.BulkPlanAction" method="confirm">
      <result name="confirm" type="freemarker">/build/view/viewUpdatedCvsRootCredentials.ftl</result>
    </action>

    <action name="viewUpdatedCvsModule" class="com.atlassian.bamboo.ww2.actions.admin.bulk.BulkPlanAction" method="confirm">
      <result name="confirm" type="freemarker">/build/view/viewUpdatedCvsModule.ftl</result>
    </action>

    <action name="viewUpdatedWebUrl" class="com.atlassian.bamboo.ww2.actions.admin.bulk.BulkPlanAction" method="confirm">
      <result name="confirm" type="freemarker">/build/view/viewUpdatedWebUrl.ftl</result>
    </action>

    <action name="viewUpdatedBulkBuild" class="com.atlassian.bamboo.ww2.actions.admin.bulk.BulkPlanAction" method="confirm">
      <result name="confirm" type="freemarker">/build/view/viewUpdatedBulkBuild.ftl</result>
    </action>

    <action name="viewBulkBuildResult" class="com.atlassian.bamboo.ww2.actions.admin.bulk.ManualBuildBulkAction">
      <result name="success" type="freemarker">/build/view/viewBulkBuildResult.ftl</result>
    </action>

    <action name="removeBuildArtifacts" class="com.atlassian.bamboo.ww2.actions.build.admin.RemoveBuildArtifacts" >
      <result name="error" type="freemarker">/error.ftl</result>
      <result name="success" type="redirect">/build/result/viewBuildArtifacts.action?buildKey=${build.key}&amp;buildNumber=${buildNumber}</result>
    </action>

    <action name="suspendBuild" class="com.atlassian.bamboo.ww2.actions.build.admin.SuspendBuild"
            method="suspendBuild" >
      <result name="error" type="freemarker">/error.ftl</result>
      <result name="success" type="redirect">/build/buildConfiguration.action?buildKey=${build.key}</result>
    </action>

    <action name="resumeBuild" class="com.atlassian.bamboo.ww2.actions.build.admin.SuspendBuild"
            method="resumeBuild" >
      <result name="error" type="freemarker">/error.ftl</result>
      <result name="success" type="redirect">/build/buildConfiguration.action?buildKey=${build.key}</result>
    </action>

    <action name="deletePlanResults" class="com.atlassian.bamboo.build.DeletePlanResults">
      <result name="success" type="redirect">/browse/${buildKey}/history</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>


    <action name="purgeBuildFiles" class="com.atlassian.bamboo.ww2.actions.build.admin.DeleteBuildFiles" method="purge">
      <result name="success" type="redirect">/build/viewBuildFiles.action?buildKey=${buildKey}</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>


    <action name="triggerManualBuild" class="com.atlassian.bamboo.v2.ww2.build.TriggerManualBuild">
      <result name="success" type="redirect">/browse/${buildKey}-${buildNumber}</result>
      <result name="input" type="freemarker">/error.ftl</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>

    <action name="stopPlan" class="com.atlassian.bamboo.buildqueue.StopPlan">
      <result name="success" type="redirect">/browse/${planKey}</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>

    <action name="viewRunningPlan" class="com.atlassian.bamboo.buildqueue.ViewRunningPlans" method="default">
      <result name="input" type="freemarker">/build/viewRunningPlans.ftl</result>
    </action>

    <action name="reorderBuild" class="com.atlassian.bamboo.ww2.actions.build.admin.ReorderBuild">
      <result name="success" type="redirect">/ajax/showBuilders.action?reorderedBuildKey=${buildKey}</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>

  </package>

  <package name="buildAdminAjax" extends="buildAdmin" namespace="/build/admin/ajax">
    <action name="getDashboardSummary" class="com.atlassian.bamboo.ww2.actions.build.DashboardSummaryAction">
      <result name="input" type="json"/>
      <result name="error" type="json"/>
      <result name="success" type="json"/>
    </action>

    <action name="getBuilds" class="com.atlassian.bamboo.ww2.actions.build.BuildJsonProviderAction">
      <result name="input" type="json"/>
      <result name="error" type="json"/>
      <result name="success" type="json"/>
    </action>

    <action name="stopPlan" class="com.atlassian.bamboo.buildqueue.StopPlan">
      <result name="input" type="json"/>
      <result name="error" type="json"/>
      <result name="success" type="json"/>
    </action>

    <action name="reorderBuild" class="com.atlassian.bamboo.ww2.actions.build.admin.ReorderBuild">
      <result name="input" type="json"/>
      <result name="error" type="json"/>
      <result name="success" type="json"/>
    </action>

    <!-- Plan variables -->
    <action name="createPlanVariable" class="com.atlassian.bamboo.ww2.actions.build.admin.config.variable.CreatePlanVariable">
      <result name="input" type="json"/>
      <result name="error" type="json"/>
      <result name="success" type="json"/>
    </action>

    <action name="deletePlanVariable" class="com.atlassian.bamboo.ww2.actions.build.admin.config.variable.DeletePlanVariable">
      <result name="input" type="json"/>
      <result name="error" type="json"/>
      <result name="success" type="json"/>
    </action>

    <action name="updatePlanVariable" class="com.atlassian.bamboo.ww2.actions.build.admin.config.variable.UpdatePlanVariable">
      <result name="input" type="json"/>
      <result name="error" type="json"/>
      <result name="success" type="json"/>
    </action>

    <action name="moveTask" class="com.atlassian.bamboo.ww2.actions.build.admin.config.task.MoveTask">
      <result name="error" type="json"/>
      <result name="success" type="json"/>
    </action>

    <action name="moveFinalBar" class="com.atlassian.bamboo.ww2.actions.build.admin.config.task.MoveTask" method="moveFinalBar">
      <result name="error" type="json"/>
      <result name="success" type="json"/>
    </action>
  </package>

   <!-- ======================================================================================== Create Build Actions -->

  <package name="buildAdminCreate" extends="buildAdmin" namespace="/build/admin/create">
    <!-- New Create Build actions -->
    <default-interceptor-ref name="buildConfigStack"/>

    <global-results>
      <result name="planCreationDeniedError" type="freemarker">/build/add/planLimitReached.ftl</result>
    </global-results>

    <action name="addPlan" class="com.atlassian.bamboo.ww2.actions.build.admin.create.CreateChain" method="default">
      <result name="input" type="freemarker">/build/add/creationMethodSelection.ftl</result>
    </action>

    <action name="newPlan" class="com.atlassian.bamboo.ww2.actions.build.admin.create.CreateChain" method="default">
      <result name="input" type="freemarker">/build/add/createChain.ftl</result>
    </action>

    <action name="createPlan" class="com.atlassian.bamboo.ww2.actions.build.admin.create.CreateChain" method="createBuild">
      <result name="input" type="freemarker">/build/add/createChain.ftl</result>
      <result name="success" type="redirect">/build/admin/create/createPlanTasks.action?buildKey=${jobKey}</result>
    </action>

    <action name="createPlanTasks" class="com.atlassian.bamboo.ww2.actions.build.admin.create.CreateChainTasks" method="default">
      <result name="input" type="freemarker">/build/add/createChainTasks.ftl</result>
    </action>

    <action name="finalisePlanCreation" class="com.atlassian.bamboo.ww2.actions.build.admin.create.CreateChainTasks" method="execute">
      <result name="input" type="freemarker">/build/add/createChainTasks.ftl</result>
      <result name="success" type="redirect">/browse/${parentKey}</result>
      <result name="successPlanDisabled" type="redirect">/browse/${parentKey}/config</result>
    </action>

    <action name="cancelPlanCreation" class="com.atlassian.bamboo.ww2.actions.build.admin.create.CreateChainTasks" method="cancel">
      <result name="success" type="redirect">/build/admin/create/addPlan.action</result>
    </action>

    <action name="clonePlan" class="com.atlassian.bamboo.ww2.actions.build.admin.create.CreateChain" method="default">
      <result name="input" type="freemarker">/build/add/cloneChain.ftl</result>
    </action>

    <action name="performClonePlan" class="com.atlassian.bamboo.ww2.actions.build.admin.create.CreateChain" method="cloneBuild">
      <result name="input" type="freemarker">/build/add/cloneChain.ftl</result>
      <result name="success" type="redirect">/browse/${buildKey}</result>
      <result name="successPlanDisabled" type="redirect">/browse/${buildKey}/config</result>
    </action>

    <!-- Import maven plan -->
    <!-- Import maven plan: provide pom location -->
    <action name="importMavenPlan" class="com.atlassian.bamboo.ww2.actions.admin.ImportMavenPlanCheckoutPomAction" method="input">
      <result name="input" type="freemarker">/admin/maven/configureImportWithMaven.ftl</result>
    </action>

    <!-- Import maven plan: checkout & parse POM -->
    <action name="importMavenPlanExecutePomCheckout" class="com.atlassian.bamboo.ww2.actions.admin.ImportMavenPlanCheckoutPomAction" method="execute">
      <result name="input" type="freemarker">/admin/maven/configureImportWithMaven.ftl</result>
      <result name="error" type="freemarker">/admin/maven/configureImportWithMaven.ftl</result>
      <result name="success" type="redirect">/build/admin/create/importMavenPlanConfigurePlan.action</result>
    </action>

    <!-- Import maven plan: configure plan -->
    <action name="importMavenPlanConfigurePlan" class="com.atlassian.bamboo.ww2.actions.admin.ImportMavenPlanCreatePlanAction" method="input">
      <result name="input" type="freemarker">/admin/maven/confirmImportWithMaven.ftl</result>
      <result name="error" type="freemarker">/admin/maven/confirmImportWithMaven.ftl</result>
    </action>

    <!-- Import maven plan: create plan -->
    <action name="importMavenPlanCreatePlan" class="com.atlassian.bamboo.ww2.actions.admin.ImportMavenPlanCreatePlanAction" method="execute">
      <result name="input" type="freemarker">/admin/maven/confirmImportWithMaven.ftl</result>
      <result name="success" type="redirect">/build/admin/edit/editBuildBuilder.action?buildKey=${fullPlanKey}</result>
    </action>

  </package>

  <!-- ======================================================================================== Edit Build Actions -->
  <package name="buildAdminEdit" extends="buildAdmin" namespace="/build/admin/edit">

    <default-interceptor-ref name="buildConfigEditStack"/>

    <action name="editBuildConfiguration" class="com.atlassian.bamboo.ww2.actions.build.admin.config.SelectBuildConfigurationTab">
      <param name="chainEquiv">/chain/admin/config/editChainConfiguration.action?planKey=${planKey}</param>
      <param name="jobEquiv">/build/admin/edit/editBuildConfiguration.action?buildKey=${planKey}</param>
      <result name="success" type="redirect">${configTabUrl}</result>
    </action>

    <action name="editBuildRepository" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildRepository"
            method="default">
      <param name="chainEquiv">/chain/admin/config/editChainRepository.action?planKey=${planKey}</param>
      <param name="jobEquiv">/build/admin/edit/editBuildRepository.action?buildKey=${planKey}</param>
      <result name="input" type="freemarker">/build/edit/editBuildRepository.ftl</result>
      <result name="error" type="freemarker">/build/edit/editBuildRepository.ftl</result>
    </action>

    <action name="updateBuildRepository" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildRepository"
            method="create">
      <param name="chainEquiv">/chain/admin/config/editChainRepository.action?planKey=${planKey}</param>
      <param name="jobEquiv">/build/admin/edit/editBuildRepository.action?buildKey=${planKey}</param>
      <result name="input" type="freemarker">/build/edit/editBuildRepository.ftl</result>
      <result name="error" type="freemarker">/build/edit/editBuildRepository.ftl</result>
      <result name="success" type="redirect">/build/admin/edit/editBuildRepository.action?buildKey=${plan.key}&amp;saved=true</result>
    </action>

    <action name="editBuildBuilder" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildBuilder"
            method="default">
      <param name="chainEquiv">/chain/admin/config/editChainDetails.action?planKey=${planKey}</param>
      <param name="jobEquiv">/build/admin/edit/editBuildBuilder.action?buildKey=${planKey}</param>
      <result name="input" type="freemarker">/build/edit/editBuildBuilder.ftl</result>
      <result name="error" type="freemarker">/build/edit/editBuildBuilder.ftl</result>
    </action>

    <action name="updateBuildBuilder" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildBuilder"
            method="create">
      <param name="chainEquiv">/chain/admin/config/editChainDetails.action?planKey=${planKey}</param>
      <param name="jobEquiv">/build/admin/edit/editBuildBuilder.action?buildKey=${planKey}</param>
      <result name="input" type="freemarker">/build/edit/editBuildBuilder.ftl</result>
      <result name="error" type="freemarker">/build/edit/editBuildBuilder.ftl</result>
      <result name="success" type="redirect">/build/admin/edit/editBuildBuilder.action?buildKey=${plan.key}&amp;saved=true</result>
    </action>

    <action name="convertBuilderToTask" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConvertBuildBuilderToTask">
      <param name="chainEquiv">/chain/admin/config/editChainDetails.action?planKey=${planKey}</param>
      <param name="jobEquiv">/build/admin/edit/editBuildBuilder.action?buildKey=${planKey}</param>
      <result name="input" type="freemarker">/build/edit/editBuildBuilder.ftl</result>
      <result name="error" type="freemarker">/build/edit/editBuildBuilder.ftl</result>
      <result name="success" type="redirect">/build/admin/edit/editBuildBuilder.action?buildKey=${plan.key}</result>
    </action>

    <!-- shows general tasks page-->
    <action name="editBuildTasks" class="com.atlassian.bamboo.ww2.actions.build.admin.config.task.ConfigureBuildTasks" method="default">
      <result name="input" type="freemarker">/build/edit/editBuildTasks.ftl</result>
      <result name="error" type="freemarker">/build/edit/editBuildTasks.ftl</result>
    </action>

    <!-- shows tasks types picker-->
    <action name="viewTaskTypes" class="com.atlassian.bamboo.ww2.actions.build.admin.config.task.ConfigureBuildTasks" method="default">
      <result name="input" type="freemarker">/build/view/viewTaskTypesSnippet.ftl</result>
    </action>

    <!--prepares the ui for adding a task-->
    <action name="addTask" class="com.atlassian.bamboo.ww2.actions.build.admin.config.task.CreateTask" method="input">
      <result name="input" type="freemarker">/build/edit/editBuildTaskSnippet.ftl</result>
    </action>

    <!--Saves the task to the db-->
    <action name="createTask" class="com.atlassian.bamboo.ww2.actions.build.admin.config.task.CreateTask">
      <result name="success" type="redirect">/build/admin/edit/editBuildTasks.action?buildKey=${plan.key}&amp;saved=true</result>
      <result name="input" type="freemarker">/build/edit/editBuildTaskSnippet.ftl</result>
    </action>

    <!--prepares the ui for editing a task-->
    <action name="editTask" class="com.atlassian.bamboo.ww2.actions.build.admin.config.task.EditTask" method="input">
      <result name="input" type="freemarker">/build/edit/editBuildTaskSnippet.ftl</result>
    </action>

    <!--Saves the edited to the db-->
    <action name="updateTask" class="com.atlassian.bamboo.ww2.actions.build.admin.config.task.EditTask">
      <result name="success" type="redirect">/build/admin/edit/editBuildTasks.action?buildKey=${plan.key}&amp;saved=true</result>
      <result name="input" type="freemarker">/build/edit/editBuildTaskSnippet.ftl</result>
    </action>
    
    <!--deletes a task-->
    <action name="confirmDeleteTask" class="com.atlassian.bamboo.ww2.actions.build.admin.config.task.DeleteTask" method="delete">
      <result name="input" type="freemarker">/build/view/confirmDeleteBuildTaskSnippet.ftl</result>
    </action>

    <action name="deleteTask" class="com.atlassian.bamboo.ww2.actions.build.admin.config.task.DeleteTask">
      <result name="success" type="redirect">/build/admin/edit/editBuildTasks.action?buildKey=${plan.key}&amp;deleted=true</result>
      <result name="input" type="freemarker">/build/view/confirmDeleteBuildTaskSnippet.ftl</result>
      <result name="error" type="freemarker">/build/view/confirmDeleteBuildTaskSnippet.ftl</result>
    </action>

    <action name="defaultBuildRequirement" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildRequirement"
            method="default">
      <param name="chainEquiv">/chain/admin/config/editChainDetails.action?planKey=${planKey}</param>
      <param name="jobEquiv">/build/admin/edit/defaultBuildRequirement.action?buildKey=${planKey}</param>
      <result name="input" type="freemarker">/build/edit/editBuildRequirement.ftl</result>
      <result name="error" type="freemarker">/build/edit/editBuildRequirement.ftl</result>
    </action>

    <action name="addBuildRequirement" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildRequirement"
            method="addRequirement">
      <param name="chainEquiv">/chain/admin/config/editChainDetails.action?planKey=${planKey}</param>
      <param name="jobEquiv">/build/admin/edit/defaultBuildRequirement.action?buildKey=${planKey}</param>
      <interceptor-ref name="buildConfigEdit"/>
      <interceptor-ref name="defaultStack"/>
      <result name="input" type="freemarker">/build/edit/editBuildRequirement.ftl</result>
      <result name="error" type="freemarker">/build/edit/editBuildRequirement.ftl</result>
      <result name="success" type="redirect">/build/admin/edit/defaultBuildRequirement.action?buildKey=${plan.key}&amp;saved=true</result>
    </action>

    <action name="deleteBuildRequirement" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildRequirement"
            method="removeRequirement">
      <param name="chainEquiv">/chain/admin/config/editChainDetails.action?planKey=${planKey}</param>
      <param name="jobEquiv">/build/admin/edit/defaultBuildRequirement.action?buildKey=${planKey}</param>
      <interceptor-ref name="buildConfigEdit"/>
      <interceptor-ref name="defaultStack"/>
      <result name="input" type="freemarker">/build/edit/editBuildRequirement.ftl</result>
      <result name="error" type="freemarker">/build/edit/editBuildRequirement.ftl</result>
      <result name="success" type="redirect">/build/admin/edit/defaultBuildRequirement.action?buildKey=${plan.key}&amp;saved=true</result>
    </action>

    <action name="defaultBuildArtifact" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildArtifact"
            method="default">
      <param name="chainEquiv">/chain/admin/config/editChainDetails.action?planKey=${planKey}</param>
      <param name="jobEquiv">/build/admin/edit/defaultBuildArtifact.action?buildKey=${planKey}</param>
      <result name="input" type="freemarker">/build/edit/editBuildArtifact.ftl</result>
      <result name="error" type="freemarker">/build/edit/editBuildArtifact.ftl</result>
    </action>

    <action name="addBuildArtifact" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildArtifact"
            method="create">
      <param name="chainEquiv">/chain/admin/config/editChainDetails.action?planKey=${planKey}</param>
      <param name="jobEquiv">/build/admin/edit/defaultBuildArtifact.action?buildKey=${planKey}</param>
      <result name="input" type="freemarker">/build/edit/editBuildArtifact.ftl</result>
      <result name="error" type="freemarker">/build/edit/editBuildArtifact.ftl</result>
      <result name="success" type="redirect">/build/admin/edit/defaultBuildArtifact.action?buildKey=${plan.key}&amp;saved=true</result>
    </action>

    <action name="deleteBuildArtifact" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildArtifact"
            method="delete">
      <param name="chainEquiv">/chain/admin/config/editChainDetails.action?planKey=${planKey}</param>
      <param name="jobEquiv">/build/admin/edit/defaultBuildArtifact.action?buildKey=${planKey}</param>
      <result name="input" type="freemarker">/build/edit/editBuildArtifact.ftl</result>
      <result name="error" type="freemarker">/build/edit/editBuildArtifact.ftl</result>
      <result name="success" type="redirect">/build/admin/edit/defaultBuildArtifact.action?buildKey=${plan.key}&amp;saved=true</result>
    </action>

    <action name="configureBuildNotification" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildNotification" method="addNotification">
      <interceptor-ref name="buildConfigEdit"/>
      <interceptor-ref name="defaultStack"/>
      <param name="chainEquiv">/chain/admin/config/defaultChainNotification.action?buildKey=${planKey}</param>
      <param name="jobEquiv">/build/admin/edit/defaultBuildNotification.action?buildKey=${planKey}</param>
      <result name="input" type="freemarker">/build/edit/editBuildNotification.ftl</result>
      <result name="error" type="freemarker">/build/edit/editBuildNotification.ftl</result>
      <result name="success" type="redirect">/build/admin/edit/defaultBuildNotification.action?buildKey=${plan.key}&amp;lastModified=${lastModified}&amp;conditionKey=${conditionKey}&amp;notificationRecipientType=${notificationRecipientType}&amp;previousTypeData=${previousTypeData}&amp;saved=true</result>
    </action>

    <action name="defaultBuildNotification" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildNotification" method="default">
      <interceptor-ref name="buildConfigEdit"/>
      <interceptor-ref name="defaultStack"/>
      <param name="chainEquiv">/chain/admin/config/defaultChainNotification.action?buildKey=${planKey}</param>
      <param name="jobEquiv">/build/admin/edit/defaultBuildNotification.action?buildKey=${planKey}</param>
      <result name="input" type="freemarker">/build/edit/editBuildNotification.ftl</result>
      <result name="error" type="freemarker">/build/edit/editBuildNotification.ftl</result>
    </action>

    <action name="updateBuildNotification" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildNotification"
            method="update">
      <interceptor-ref name="buildConfigEdit"/>
      <interceptor-ref name="defaultStack"/>
      <param name="chainEquiv">/chain/admin/config/defaultChainNotification.action?buildKey=${planKey}</param>
      <param name="jobEquiv">/build/admin/edit/defaultBuildNotification.action?buildKey=${planKey}</param>
      <result name="input" type="freemarker">/build/edit/changeBuildNotification.ftl</result>
      <result name="error" type="freemarker">/build/edit/changeBuildNotification.ftl</result>
      <result name="success" type="redirect">/build/admin/edit/defaultBuildNotification.action?buildKey=${plan.key}&amp;lastModified=${lastModified}&amp;saved=true</result>
    </action>

    <action name="deleteBuildNotification" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildNotification"
            method="delete">
      <interceptor-ref name="buildConfigEdit"/>
      <interceptor-ref name="defaultStack"/>
      <param name="chainEquiv">/chain/admin/config/defaultChainNotification.action?buildKey=${planKey}</param>
      <param name="jobEquiv">/build/admin/edit/defaultBuildNotification.action?buildKey=${planKey}</param>
      <result name="input" type="freemarker">/build/edit/editBuildNotification.ftl</result>
      <result name="error" type="freemarker">/build/edit/editBuildNotification.ftl</result>
      <result name="success" type="redirect">/build/admin/edit/defaultBuildNotification.action?buildKey=${plan.key}&amp;saved=true</result>
    </action>

    <action name="editBuildNotification" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildNotification"
            method="edit">
      <interceptor-ref name="buildConfigEdit"/>
      <interceptor-ref name="defaultStack"/>
      <param name="chainEquiv">/chain/admin/config/defaultChainNotification.action?buildKey=${planKey}</param>
      <param name="jobEquiv">/build/admin/edit/defaultBuildNotification.action?buildKey=${planKey}</param>
      <result name="input" type="freemarker">/build/edit/changeBuildNotification.ftl</result>
      <result name="error" type="freemarker">/build/edit/changeBuildNotification.ftl</result>
    </action>

    <action name="editBuildPostAction" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildPostAction"
            method="default">
      <param name="chainEquiv">/chain/admin/config/editChainDetails.action?planKey=${planKey}</param>
      <param name="jobEquiv">/build/admin/edit/editBuildPostAction.action?buildKey=${planKey}</param>
      <result name="input" type="freemarker">/build/edit/editBuildPostAction.ftl</result>
      <result name="error" type="freemarker">/build/edit/editBuildPostAction.ftl</result>
    </action>

    <action name="updateBuildPostAction" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildPostAction"
            method="create">
      <param name="chainEquiv">/chain/admin/config/editChainDetails.action?planKey=${planKey}</param>
      <param name="jobEquiv">/build/admin/edit/editBuildPostAction.action?buildKey=${planKey}</param>
      <result name="input" type="freemarker">/build/edit/editBuildPostAction.ftl</result>
      <result name="error" type="freemarker">/build/edit/editBuildPostAction.ftl</result>
      <result name="success" type="redirect">/build/admin/edit/editBuildPostAction.action?buildKey=${plan.key}&amp;saved=true</result>
    </action>

    <action name="editMiscellaneous" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildMiscellaneousOptions"
            method="default">
      <param name="chainEquiv">/chain/admin/config/editChainMiscellaneous.action?buildKey=${planKey}</param>
      <param name="jobEquiv">/build/admin/edit/editMiscellaneous.action?buildKey=${planKey}</param>
      <result name="input" type="freemarker">/build/edit/editBuildMiscellaneousOptions.ftl</result>
    </action>

    <action name="updateMiscellaneous" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildMiscellaneousOptions"
            method="create">
      <param name="chainEquiv">/chain/admin/config/editChainMiscellaneous.action?buildKey=${planKey}</param>
      <param name="jobEquiv">/build/admin/edit/editMiscellaneous.action?buildKey=${planKey}</param>
      <result name="input" type="freemarker">/build/edit/editBuildMiscellaneousOptions.ftl</result>
      <result name="error" type="freemarker">/build/edit/editBuildMiscellaneousOptions.ftl</result>
      <result name="success" type="redirect">/build/admin/edit/editMiscellaneous.action?buildKey=${plan.key}&amp;saved=true</result>
    </action>

    <action name="editBuildPermissions" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildPermissions"
            method="default">
      <param name="chainEquiv">/chain/admin/config/editChainPermissions.action?buildKey=${planKey}</param>
      <param name="jobEquiv">/build/admin/edit/editBuildPermissions.action?buildKey=${planKey}</param>
      <result name="input" type="freemarker">/build/edit/editBuildPermissions.ftl</result>
    </action>

    <action name="updateBuildPermissions" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildPermissions"
            method="updatePermissions">
      <param name="chainEquiv">/chain/admin/config/editChainPermissions.action?buildKey=${planKey}</param>
      <param name="jobEquiv">/build/admin/edit/editBuildPermissions.action?buildKey=${planKey}</param>
      <result name="input" type="freemarker">/build/edit/editBuildPermissions.ftl</result>
      <result name="editPermissions" type="redirect">/build/admin/edit/editBuildPermissions.action?buildKey=${plan.key}</result>
      <result name="success" type="redirect">/build/admin/edit/editBuildPermissions.action?buildKey=${plan.key}&amp;saved=true</result>
    </action>

    <action name="editBuildDetails" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildDetails"
            method="default">
      <param name="chainEquiv">/chain/admin/config/editChainDetails.action?buildKey=${planKey}</param>
      <param name="jobEquiv">/build/admin/edit/editBuildDetails.action?buildKey=${planKey}</param>
      <result name="input" type="freemarker">/build/edit/editBuildDetails.ftl</result>
    </action>

    <action name="updateBuildDetails" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildDetails"
            method="create">
      <param name="chainEquiv">/chain/admin/config/editChainDetails.action?planKey=${planKey}</param>
      <param name="jobEquiv">/build/admin/edit/editBuildDetails.action?buildKey=${planKey}</param>
      <result name="input" type="freemarker">/build/edit/editBuildDetails.ftl</result>
      <result name="error" type="freemarker">/build/edit/editBuildDetails.ftl</result>
      <result name="success" type="redirect">/build/admin/edit/editBuildDetails.action?buildKey=${plan.key}&amp;saved=true</result>
    </action>

  </package>



  <!-- ================================================================================================ Ajax Actions -->
  <!-- These don't get decorated: see decorators.xml -->
  <package name="ajax" extends="default" namespace="/ajax">

    <action name="configureAlias" class="com.atlassian.bamboo.ww2.actions.admin.user.ConfigureAlias" method="default">
      <result name="input" type="freemarker">/admin/user/configureAlias.ftl</result>
    </action>

    <action name="addAlias" class="com.atlassian.bamboo.ww2.actions.admin.user.ConfigureAlias">
      <result name="input" type="freemarker">/admin/user/configureAlias.ftl</result>
      <result name="error" type="freemarker">/admin/user/configureAlias.ftl</result>
      <result name="success" type="redirect">/profile/editProfile.action</result>
    </action>
    
    <action name="configureSharedBuilderCapability" class="com.atlassian.bamboo.configuration.agent.ConfigureSharedLocalCapability" method="default">
      <param name="capabilityType">builder</param>
      <interceptor-ref name="globalAdminStack"/>
      <result name="input" type="freemarker">/build/common/addBuilderCapabilityFragment.ftl</result>
    </action>

    <action name="addSharedBuilderCapability" class="com.atlassian.bamboo.configuration.agent.AddSharedLocalBuilderCapability" method="default">
      <interceptor-ref name="globalAdminStackAlwaysValidate"/>
      <result name="input" type="freemarker">/build/common/addBuilderCapabilityFragment.ftl</result>
      <result name="error" type="freemarker">/build/common/addBuilderCapabilityFragment.ftl</result>
      <result name="success" type="redirect">/admin/agent/viewBuilders.action</result>
    </action>

    <action name="configureSharedJdkCapability" class="com.atlassian.bamboo.configuration.agent.ConfigureSharedLocalCapability" method="default">
      <param name="capabilityType">jdk</param>
      <interceptor-ref name="globalAdminStack"/>
      <result name="input" type="freemarker">/build/common/addJdkCapabilityFragment.ftl</result>
    </action>

    <action name="addSharedJdkCapability" class="com.atlassian.bamboo.configuration.agent.AddSharedLocalCapability" method="default">
      <interceptor-ref name="globalAdminStackAlwaysValidate"/>
      <result name="input" type="freemarker">/build/common/addJdkCapabilityFragment.ftl</result>
      <result name="error" type="freemarker">/build/common/addJdkCapabilityFragment.ftl</result>
      <result name="success" type="redirect">/admin/agent/viewJdks.action</result>
    </action>

    <action name="configureInstantMessagingServerInline" class="com.atlassian.bamboo.ww2.actions.admin.instantmessagingserver.ConfigureInstantMessagingServer" method="default">
      <result name="input" type="freemarker">/admin/instantmessagingserver/configureInstantMessagingServerFragment.ftl</result>
    </action>
    
    <action name="createInstantMessagingServerInline" class="com.atlassian.bamboo.ww2.actions.admin.instantmessagingserver.CreateInstantMessagingServer" method="default">
      <interceptor-ref name="globalAdminStackAlwaysValidate"/>
      <result name="input" type="json" />
      <result name="error" type="json" />
      <result name="success" type="json" />
    </action>

    <action name="configureMailServerInline" class="com.atlassian.bamboo.ww2.actions.admin.mail.ConfigureMailServer" method="default">
      <interceptor-ref name="globalAdminStack"/>
      <result name="input" type="freemarker">/admin/mail/configureMailServerFragment.ftl</result>
    </action>

    <action name="saveMailServerInline" class="com.atlassian.bamboo.ww2.actions.admin.mail.ConfigureMailServer" method="save">
      <interceptor-ref name="globalAdminStack"/>
      <result name="input" type="json" />
      <result name="error" type="json" />
      <result name="success" type="json" />
    </action>

    <action name="viewPlanUpdates" class="com.atlassian.bamboo.js.ViewPlanUpdates">
      <result name="success" type="json" />
    </action>

    <action name="viewActivityLogSnippet" class="com.atlassian.bamboo.ww2.actions.ViewActivityLog">
      <result name="input" type="freemarker">/fragments/current/activityLogs.ftl</result>
    </action>

    <action name="viewElasticSnippet" class="com.atlassian.bamboo.ww2.actions.admin.elastic.ManageElasticInstancesAction" method="view">
      <result name="success" type="freemarker">/admin/elastic/elasticSnippet.ftl</result>
    </action>

    <action name="viewRemoteAgentsLogSnippet" class="com.atlassian.bamboo.configuration.agent.ConfigureAgents" method="default">
      <result name="input" type="freemarker">/admin/agent/remoteAgentsLogSnippet.ftl</result>
    </action>

    <action name="viewOfflineRemoteAgents" class="com.atlassian.bamboo.configuration.agent.ViewOfflineAgents" method="default">
      <result name="input" type="freemarker">/admin/agent/offlineRemoteAgentSnippet.ftl</result>
    </action>

    <action name="viewAgentsMatchingRequirements" class="com.atlassian.bamboo.configuration.agent.ViewAgents" method="showTooltip">
      <result name="input" type="freemarker">/agent/agentMatchingRequirementsSnippet.ftl</result>
    </action>

    <action name="viewImagesMatchingRequirements" class="com.atlassian.bamboo.configuration.agent.ViewAgents" method="showTooltip">
      <result name="input" type="freemarker">/agent/imageMatchingRequirementsSnippet.ftl</result>
    </action>

    <action name="viewElasticInstanceSnippet" class="com.atlassian.bamboo.ww2.actions.admin.elastic.ViewElasticInstanceAction" method="view">
       <result name="success" type="freemarker">/admin/elastic/viewElasticInstanceSnippet.ftl</result>
       <result name="error" type="freemarker">/fragments/actionErrors.ftl</result>
    </action>

    <action name="viewAgentDetailsSnippet" class="com.atlassian.bamboo.ww2.actions.agent.ViewAgentDetailsAction" method="view">
       <result name="success" type="freemarker">/admin/agent/viewAgentDetailsSnippet.ftl</result>
       <result name="error" type="freemarker">/fragments/actionErrors.ftl</result>
    </action>

    <action name="viewCapabilitySnippet" class="com.atlassian.bamboo.configuration.agent.ConfigureCapabilityKey" method="default">
      <interceptor-ref name="globalAdminStack"/>
      <result name="input" type="freemarker">/admin/agent/viewCapabilityKeySnippet.ftl</result>
    </action>

    <action name="setCookie" class="com.atlassian.bamboo.ww2.actions.FilterCookieWriterAction">
      <result name="success" type="redirect">/start.action</result>
    </action>

    <!--Status bar on top right-->
    <action name="showLatestBuildStatus" class="com.atlassian.bamboo.build.ShowLatestBuildStatus">
      <result name="success" type="freemarker">/fragments/plan/latestStatus.ftl</result>
    </action>

    <action name="displayCurrentActivity" class="com.atlassian.bamboo.webwork.StarterAction">
      <result name="success" type="freemarker">/displayCurrentActivity.ftl</result>
    </action>

    <!--Individual portlets on Dash "My Bamboo" Tab-->
    <action name="myFavourites" class="com.atlassian.bamboo.webwork.StarterAction">
      <result name="success" type="freemarker">/fragments/user/favourites.ftl</result>
    </action>

    <action name="myChanges" class="com.atlassian.bamboo.ww2.actions.user.ViewUserSummary" method="default">
      <result name="input" type="freemarker">/fragments/user/changes.ftl</result>
    </action>

    <action name="myBreakages" class="com.atlassian.bamboo.ww2.actions.user.ViewUserSummary" method="default">
      <result name="input" type="freemarker">/fragments/user/breakages.ftl</result>
    </action>

    <action name="myResponsibilities" class="com.atlassian.bamboo.webwork.StarterAction">
      <result name="success" type="freemarker">/fragments/user/responsibilities.ftl</result>
    </action>

    <!--Individual portlets on "Current Activity" Tab-->
    <action name="showBuilders" class="com.atlassian.bamboo.webwork.StarterAction">
      <result name="success" type="freemarker">/fragments/showBuildQueue.ftl</result>
    </action>

    <!--External summary portlets-->
    <action name="jsBuildSummaryFavourites" class="com.atlassian.bamboo.webwork.StarterAction">
      <result name="success" type="freemarker">/fragments/jsBuildSummaryFavourites.ftl</result>
    </action>

    <action name="jsBuildSummaryAll" class="com.atlassian.bamboo.webwork.StarterAction">
      <result name="success" type="freemarker">/fragments/jsBuildSummaryAll.ftl</result>
    </action>

    <action name="viewRunningPlans" class="com.atlassian.bamboo.buildqueue.ViewRunningPlans" method="default">
      <result name="input" type="freemarker">/build/viewRunningPlans.ftl</result>
    </action>

    <action name="addArtifactDefinition" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildArtifact" method="input">
      <result name="input" type="freemarker">/fragments/artifact/addArtifactDefinition.ftl</result>
    </action>

    <action name="createArtifactDefinition" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildArtifact" method="create">
      <result name="input" type="json"/>
      <result name="error" type="json"/>
      <result name="success" type="json"/>
    </action>

    <action name="confirmDeleteArtifactDefinition" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildArtifact" method="input">
      <result name="input" type="freemarker">/fragments/artifact/confirmDeleteArtifactDefinition.ftl</result>
    </action>

    <action name="confirmToggleSharedArtifact" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildArtifact" method="input">
      <result name="input" type="freemarker">/fragments/artifact/confirmToggleSharedArtifact.ftl</result>
    </action>

    <action name="deleteArtifactDefinition" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildArtifact" method="delete">
      <result name="input" type="json"/>
      <result name="error" type="json"/>
      <result name="success" type="json"/>
    </action>

    <action name="editArtifactDefinition" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildArtifact" method="input">
      <result name="input" type="freemarker">/fragments/artifact/editArtifactDefinition.ftl</result>
    </action>

    <action name="toggleArtifactDefinitionSharing" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildArtifact" method="toggleSharing">
      <result name="success" type="json"/>
      <result name="error" type="json"/>
      <result name="confirm" type="json"/>
    </action>

    <action name="renameArtifactDefinitionToEnableSharing" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildArtifact" method="input">
      <result name="input" type="freemarker">/fragments/artifact/renameArtifactDefinitionToEnableSharing.ftl</result>
    </action>

    <action name="updateArtifactDefinition" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildArtifact" method="update">
      <result name="input" type="json"/>
      <result name="error" type="json"/>
      <result name="success" type="json"/>
    </action>

    <action name="addArtifactSubscription" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureArtifactSubscription" method="input">
      <result name="input" type="freemarker">/fragments/artifact/addArtifactSubscription.ftl</result>
    </action>

    <action name="createArtifactSubscription" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureArtifactSubscription" method="create">
      <result name="input" type="json"/>
      <result name="error" type="json"/>
      <result name="success" type="json"/>
    </action>

    <action name="editArtifactSubscription" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureArtifactSubscription" method="input">
      <result name="input" type="freemarker">/fragments/artifact/editArtifactSubscription.ftl</result>
    </action>

    <action name="updateArtifactSubscription" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureArtifactSubscription" method="update">
      <result name="input" type="json"/>
      <result name="error" type="json"/>
      <result name="success" type="json"/>
    </action>

    <action name="confirmDeleteArtifactSubscription" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureArtifactSubscription" method="input">
      <result name="input" type="freemarker">/fragments/artifact/confirmDeleteArtifactSubscription.ftl</result>
    </action>

    <action name="deleteArtifactSubscription" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureArtifactSubscription" method="delete">
      <result name="input" type="json"/>
      <result name="error" type="json"/>
      <result name="success" type="json"/>
    </action>

    <action name="confirmRemoveAllArtifacts" class="com.atlassian.bamboo.ww2.actions.build.admin.RemoveBuildArtifacts" method="input">
      <result name="input" type="freemarker">/fragments/artifact/confirmRemoveAllArtifacts.ftl</result>
    </action>

    <action name="editCronExpression" class="com.atlassian.bamboo.ww2.actions.CronExpressionGeneratorAction" method="default">
        <result name="input" type="freemarker">/admin/schedule/cronEditor.ftl</result>
    </action>

    <action name="getPrettyCronExpression" class="com.atlassian.bamboo.ww2.actions.CronExpressionGeneratorAction" method="default">
        <result name="input" type="json"/>
        <result name="error" type="json"/>
        <result name="success" type="json"/>
    </action>

    <action name="returnCronExpression" class="com.atlassian.bamboo.ww2.actions.CronExpressionGeneratorAction">
		  <result name="input" type="json"/>
		  <result name="error" type="json"/>
		  <result name="success" type="json"/>
    </action>

    <action name="editParameterisedManualBuild" class="com.atlassian.bamboo.v2.ww2.build.ParameterisedManualBuild" method="input">
      <result name="input" type="freemarker">/admin/build/editParameterisedManualBuild.ftl</result>
    </action>

    <action name="runParametrisedManualBuild" class="com.atlassian.bamboo.v2.ww2.build.ParameterisedManualBuild" method="execute">
      <result name="success" type="redirect">/browse/${planKey}-${buildNumber}</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>

  </package>

  <!-- ============================================================================================= Project Actions -->
  <package name="projectView" extends="default" namespace="/project">
    <action name="viewProject" class="com.atlassian.bamboo.ww2.actions.project.ViewProject">
      <result name="input" type="freemarker">/project/viewProject.ftl</result>
      <result name="success" type="freemarker">/project/viewProject.ftl</result>
      <result name="singlebuild" type="redirect">/browse/${singleBuildKey}</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>
  </package>

    <package name="chainAdmin" extends="default" namespace="/chain/admin">
        <default-interceptor-ref name="defaultStack"/>
        <global-results>
            <result name="cancel" type="redirect">/start.action</result>
            <result name="error" type="freemarker">/error.ftl</result>
            <result name="planCreationDeniedError" type="freemarker">/build/add/planLimitReached.ftl</result>
        </global-results>

        <action name="confirmDeleteStage" class="com.atlassian.bamboo.ww2.actions.chains.DeleteStageAction" method="default">
            <result name="input" type="freemarker">/chain/edit/deleteStage.ftl</result>
            <result name="success" type="redirect">/browse/${buildKey}/stages</result>
        </action>

        <action name="deleteStage" class="com.atlassian.bamboo.ww2.actions.chains.DeleteStageAction" method="delete">
            <result name="input" type="redirect">/browse/${buildKey}/stages</result>
            <result name="success" type="redirect">/browse/${buildKey}/stages</result>
        </action>

        <action name="addJob" class="com.atlassian.bamboo.ww2.actions.chains.CreateJob" method="default">
          <interceptor-ref name="buildConfigStack"/>
          <result name="input" type="freemarker">/chain/add/jobCreationMethodSelection.ftl</result>
        </action>

        <action name="newJob" class="com.atlassian.bamboo.ww2.actions.chains.CreateJob" method="default">
          <interceptor-ref name="buildConfigStack"/>
          <result name="input" type="freemarker">/chain/add/createJob.ftl</result>
        </action>

        <action name="createJob" class="com.atlassian.bamboo.ww2.actions.chains.CreateJob" method="createJob">
          <interceptor-ref name="buildConfigStack"/>
          <result name="input" type="freemarker">/chain/add/createJob.ftl</result>
          <result name="error" type="freemarker">/chain/add/createJob.ftl</result>
          <result name="success" type="redirect">/chain/admin/createJobTasks.action?buildKey=${subBuildKey}</result>
        </action>

        <action name="createJobTasks" class="com.atlassian.bamboo.ww2.actions.chains.CreateJobTasks" method="default">
          <result name="input" type="freemarker">/chain/add/createJobTasks.ftl</result>
        </action>

        <action name="finaliseJobCreation" class="com.atlassian.bamboo.ww2.actions.chains.CreateJobTasks" method="execute">
          <result name="input" type="freemarker">/chain/add/createJobTasks.ftl</result>
          <result name="success" type="redirect">/browse/${parentKey}/stages</result>
        </action>

        <action name="cancelJobCreation" class="com.atlassian.bamboo.ww2.actions.chains.CreateJobTasks" method="cancel">
          <result name="success" type="redirect">/browse/${parentKey}/stages</result>
        </action>

        <action name="cloneJob" class="com.atlassian.bamboo.ww2.actions.chains.CreateJob" method="default">
          <interceptor-ref name="buildConfigStack"/>
          <result name="input" type="freemarker">/chain/add/cloneJob.ftl</result>
          <result name="error" type="freemarker">/chain/add/cloneJob.ftl</result>
        </action>

        <action name="createClonedJob" class="com.atlassian.bamboo.ww2.actions.chains.CreateJob" method="cloneJob">
          <interceptor-ref name="buildConfigStack"/>
          <result name="input" type="freemarker">/chain/add/cloneJob.ftl</result>
          <result name="error" type="freemarker">/chain/add/cloneJob.ftl</result>
          <result name="success" type="redirect">/browse/${buildKey}/stages</result>
        </action>

        <action name="viewSvnCredentials" class="com.atlassian.bamboo.ww2.actions.chains.admin.ViewPlanConfiguration">
          <result name="success" type="freemarker">/build/view/viewSvnCredentials.ftl</result>
        </action>

        <action name="viewSvnUrl" class="com.atlassian.bamboo.ww2.actions.chains.admin.ViewPlanConfiguration">
          <result name="success" type="freemarker">/build/view/viewSvnUrl.ftl</result>
        </action>

        <action name="viewCvsRootCredentials" class="com.atlassian.bamboo.ww2.actions.chains.admin.ViewPlanConfiguration">
          <result name="success" type="freemarker">/build/view/viewCvsRootCredentials.ftl</result>
        </action>

        <action name="viewCvsModule" class="com.atlassian.bamboo.ww2.actions.chains.admin.ViewPlanConfiguration">
          <result name="success" type="freemarker">/build/view/viewCvsModule.ftl</result>
        </action>

        <action name="viewWebUrl" class="com.atlassian.bamboo.ww2.actions.chains.admin.ViewPlanConfiguration">
          <result name="success" type="freemarker">/build/view/viewWebUrl.ftl</result>
        </action>

        <action name="deleteAllChainNotification" class="com.atlassian.bamboo.ww2.actions.chains.admin.ConfigureChainNotification"
                method="deleteAll">
          <param name="jobEquiv">/build/admin/edit/editBuildDetails.action?buildKey=${planKey}</param>
          <param name="chainEquiv">chain/admin/config/defaultChainNotification.action?buildKey=${planKey}</param>
          <result name="input" type="freemarker">/chain/edit/editChainNotifications.ftl</result>
          <result name="error" type="freemarker">/chain/edit/editChainNotifications.ftl</result>
          <result name="success" type="redirect">/chain/admin/config/defaultChainNotification.action?buildKey=${plan.key}&amp;saved=true</result>
        </action>

        <action name="deleteChain" class="com.atlassian.bamboo.ww2.actions.plan.DeletePlan" method="doInput">
          <result name="input" type="freemarker">/chain/edit/delete.ftl</result>
          <result name="success" type="redirect">start.action</result>
        </action>
    </package>

    <package name="chainAdminAjax" extends="chainAdmin" namespace="/chain/admin/ajax">
        <action name="addStage" class="com.atlassian.bamboo.ww2.actions.chains.AddStageAction" method="default">
          <result name="input" type="freemarker">/chain/add/addStage.ftl</result>
        </action>

        <action name="createStage" class="com.atlassian.bamboo.ww2.actions.chains.AddStageAction">
          <result name="input" type="freemarker">/chain/add/addStage.ftl</result>
          <result name="success" type="redirect">/browse/${buildKey}/stages</result>
        </action>

        <action name="editStage" class="com.atlassian.bamboo.ww2.actions.chains.StageAction" method="default">
          <result name="input" type="freemarker">/chain/edit/editStage.ftl</result>
        </action>

        <action name="saveStage" class="com.atlassian.bamboo.ww2.actions.chains.StageAction">
          <result name="input" type="freemarker">/chain/edit/editStage.ftl</result>
          <result name="success" type="redirect">/browse/${buildKey}/stages</result>
        </action>

        <action name="moveStage" class="com.atlassian.bamboo.ww2.actions.chains.MoveStageAction" method="move">
          <result name="input" type="json"/>
          <result name="error" type="json"/>
          <result name="success" type="json"/>
          <result name="confirm" type="json"/>
        </action>

       <action name="confirmStageMove" class="com.atlassian.bamboo.ww2.actions.chains.MoveStageAction" method="confirm">
         <result name="input" type="freemarker">/fragments/artifact/confirmMoveStage.ftl</result>
       </action>

        <action name="moveJob" class="com.atlassian.bamboo.ww2.actions.chains.MoveJobAction">
          <result name="input" type="json"/>
          <result name="error" type="json"/>
          <result name="success" type="json"/>
          <result name="confirm" type="json"/>
        </action>

        <action name="confirmJobMove" class="com.atlassian.bamboo.ww2.actions.chains.MoveJobAction" method="confirm">
          <result name="input" type="freemarker">/fragments/artifact/confirmMoveJob.ftl</result>
        </action>

        <action name="getChains" class="com.atlassian.bamboo.ww2.actions.build.ChainJsonProviderAction">
          <result name="input" type="json"/>
          <result name="error" type="json"/>
          <result name="success" type="json"/>
        </action>

        <action name="getJobs" class="com.atlassian.bamboo.ww2.actions.chains.ListJobsForChain">
            <result name="input" type="json"/>
            <result name="error" type="json"/>
            <result name="success" type="json"/>
        </action>
    </package>

    <package name="chainAdminConfig" extends="default" namespace="/chain/admin/config">
      <default-interceptor-ref name="buildConfigEditStack"/>

      <action name="defaultStages" class="com.atlassian.bamboo.ww2.actions.chains.StageAction" method="default">
        <param name="chainEquiv">/chain/admin/config/defaultStages.action?planKey=${planKey}</param>
        <param name="jobEquiv">/build/admin/edit/editBuildDetails.action?buildKey=${planKey}</param>
        <result name="input" type="freemarker">/chain/edit/editChainStructure.ftl</result>
        <result name="error" type="freemarker">/chain/edit/editChainStructure.ftl</result>
      </action>

      <action name="editChainConfiguration" class="com.atlassian.bamboo.ww2.actions.build.admin.config.SelectBuildConfigurationTab">
        <param name="jobEquiv">/build/admin/edit/editBuildDetails.action?buildKey=${planKey}</param>
        <param name="chainEquiv">/chain/admin/config/editChainConfiguration.action?planKey=${planKey}</param>
        <result name="success" type="redirect">${configTabUrl}</result>
      </action>      

      <action name="editChainDetails" class="com.atlassian.bamboo.ww2.actions.chains.EditChainDetails" method="default">
        <param name="jobEquiv">/build/admin/edit/editBuildDetails.action?buildKey=${planKey}</param>
        <param name="chainEquiv">chain/admin/config/editChainDetails.action?buildKey=${planKey}</param>
        <result name="input" type="freemarker">/chain/edit/editChainDetails.ftl</result>
      </action>

      <action name="saveChainDetails" class="com.atlassian.bamboo.ww2.actions.chains.EditChainDetails">
        <param name="jobEquiv">/build/admin/edit/editBuildDetails.action?buildKey=${planKey}</param>
        <param name="chainEquiv">chain/admin/config/editChainDetails.action?buildKey=${planKey}</param>
        <result name="input" type="freemarker">/chain/edit/editChainDetails.ftl</result>
        <result name="success" type="redirect">/chain/admin/config/editChainDetails.action?planKey=${plan.key}&amp;saved=true</result>
      </action>

      <action name="editChainDependencies" class="com.atlassian.bamboo.ww2.actions.plans.admin.ConfigurePlanDependencies"
              method="default">
        <param name="jobEquiv">/build/admin/edit/editBuildDetails.action?buildKey=${planKey}</param>
        <param name="chainEquiv">chain/admin/config/editChainDependencies.action?buildKey=${planKey}</param>
        <result name="input" type="freemarker">/chain/edit/editChainDependencies.ftl</result>
      </action>

      <action name="updateChainDependencies" class="com.atlassian.bamboo.ww2.actions.plans.admin.ConfigurePlanDependencies"
              method="create">
        <param name="jobEquiv">/build/admin/edit/editBuildDetails.action?buildKey=${planKey}</param>
        <param name="chainEquiv">chain/admin/config/editChainDependencies.action?buildKey=${planKey}</param>
        <result name="input" type="freemarker">/chain/edit/editChainDependencies.ftl</result>
        <result name="error" type="freemarker">/chain/edit/editChainDependencies.ftl</result>
        <result name="success" type="redirect">/chain/admin/config/editChainDependencies.action?planKey=${plan.key}&amp;saved=true</result>
      </action>

      <action name="editChainRepository"
              class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildRepository"
              method="default">
        <param name="jobEquiv">build/admin/edit/editBuildRepository.action?buildKey=${planKey}</param>
        <param name="chainEquiv">chain/admin/config/editChainRepository.action?buildKey=${planKey}</param>
        <result name="input" type="freemarker">/chain/edit/editChainRepository.ftl</result>
      </action>

      <action name="updateChainRepository"
              class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildRepository"
              method="create">
          <param name="jobEquiv">build/admin/edit/editBuildRepository.action?buildKey=${planKey}</param>
          <param name="chainEquiv">chain/admin/config/editChainRepository.action?buildKey=${planKey}</param>
          <result name="input" type="freemarker">/chain/edit/editChainRepository.ftl</result>
          <result name="error" type="freemarker">/chain/edit/editChainRepository.ftl</result>
          <result name="success" type="redirect">/chain/admin/config/editChainRepository.action?planKey=${plan.key}&amp;saved=true</result>
      </action>

      <action name="configureChainNotification" class="com.atlassian.bamboo.ww2.actions.chains.admin.ConfigureChainNotification" method="addNotification">
        <param name="jobEquiv">/build/admin/edit/editBuildDetails.action?buildKey=${planKey}</param>
        <param name="chainEquiv">chain/admin/config/defaultChainNotification.action?buildKey=${planKey}</param>
        <result name="input" type="freemarker">/chain/edit/editChainNotifications.ftl</result>
        <result name="error" type="freemarker">/chain/edit/editChainNotifications.ftl</result>
        <result name="success" type="redirect">/chain/admin/config/defaultChainNotification.action?buildKey=${plan.key}&amp;lastModified=${lastModified}&amp;conditionKey=${conditionKey}&amp;notificationRecipientType=${notificationRecipientType}&amp;previousTypeData=${previousTypeData}&amp;saved=true</result>
      </action>

      <action name="defaultChainNotification" class="com.atlassian.bamboo.ww2.actions.chains.admin.ConfigureChainNotification" method="default">
        <param name="jobEquiv">/build/admin/edit/editBuildDetails.action?buildKey=${planKey}</param>
        <param name="chainEquiv">chain/admin/config/defaultChainNotification.action?buildKey=${planKey}</param>
        <result name="input" type="freemarker">/chain/edit/editChainNotifications.ftl</result>
        <result name="error" type="freemarker">/chain/edit/editChainNotifications.ftl</result>
      </action>

      <action name="editChainNotificationSnippet" class="com.atlassian.bamboo.ww2.actions.chains.admin.ConfigureChainNotification" method="default">
        <param name="jobEquiv">/build/admin/edit/editBuildDetails.action?buildKey=${planKey}</param>
        <param name="chainEquiv">chain/admin/config/defaultChainNotification.action?buildKey=${planKey}</param>
        <result name="input" type="freemarker">/chain/edit/editChainNotificationsSnippet.ftl</result>
        <result name="error" type="freemarker">/chain/edit/editChainNotificationsSnippet.ftl</result>
      </action>

      <action name="viewChainNotification" class="com.atlassian.bamboo.ww2.actions.chains.admin.ConfigureChainNotification">
        <param name="jobEquiv">/build/admin/edit/editBuildDetails.action?buildKey=${planKey}</param>
        <param name="chainEquiv">chain/admin/config/defaultChainNotification.action?buildKey=${planKey}</param>
        <result name="success" type="freemarker">/build/view/viewNotifications.ftl</result>        
      </action>

      <action name="updateChainNotification" class="com.atlassian.bamboo.ww2.actions.chains.admin.ConfigureChainNotification"
              method="update">
        <param name="jobEquiv">/build/admin/edit/editBuildDetails.action?buildKey=${planKey}</param>
        <param name="chainEquiv">chain/admin/config/defaultChainNotification.action?buildKey=${planKey}</param>
        <result name="input" type="freemarker">/chain/edit/changeChainNotification.ftl</result>
        <result name="error" type="freemarker">/chain/edit/changeChainNotification.ftl</result>
        <result name="success" type="redirect">/chain/admin/config/defaultChainNotification.action?buildKey=${plan.key}&amp;lastModified=${lastModified}&amp;saved=true</result>
      </action>

      <action name="deleteChainNotification" class="com.atlassian.bamboo.ww2.actions.chains.admin.ConfigureChainNotification"
              method="delete">
        <param name="jobEquiv">/build/admin/edit/editBuildDetails.action?buildKey=${planKey}</param>
        <param name="chainEquiv">chain/admin/config/defaultChainNotification.action?buildKey=${planKey}</param>
        <result name="input" type="freemarker">/chain/edit/editChainNotifications.ftl</result>
        <result name="error" type="freemarker">/chain/edit/editChainNotifications.ftl</result>
        <result name="success" type="redirect">/chain/admin/config/defaultChainNotification.action?buildKey=${plan.key}&amp;saved=true</result>
      </action>

      <action name="editChainNotification" class="com.atlassian.bamboo.ww2.actions.chains.admin.ConfigureChainNotification"
              method="edit">
        <param name="jobEquiv">/build/admin/edit/editBuildDetails.action?buildKey=${planKey}</param>
        <param name="chainEquiv">chain/admin/config/defaultChainNotification.action?buildKey=${planKey}</param>
        <result name="input" type="freemarker">/chain/edit/changeChainNotification.ftl</result>
        <result name="error" type="freemarker">/chain/edit/changeChainNotification.ftl</result>
        <result name="success" type="redirect">/chain/admin/config/defaultChainNotification.action?buildKey=${plan.key}</result>
      </action>

      <action name="viewChainAuditLog" class="com.atlassian.bamboo.ww2.actions.chains.admin.ViewChainAuditLog">
        <param name="jobEquiv">/build/admin/edit/editBuildDetails.action?buildKey=${planKey}</param>
        <param name="chainEquiv">chain/admin/config/viewChainAuditLog.action?buildKey=${planKey}</param>
        <result name="success" type="freemarker">/chain/edit/viewChainChangeHistory.ftl</result>
      </action>

      <action name="deleteChainAuditLog" class="com.atlassian.bamboo.ww2.actions.chains.admin.ViewChainAuditLog" method="delete">
        <result name="error" type="freemarker">/error.ftl</result>
        <result name="success" type="redirect">/chain/admin/config/viewChainAuditLog.action?buildKey=${planKey}</result>
      </action>

      <action name="editChainMiscellaneous" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildMiscellaneousOptions"
              method="default">
        <param name="jobEquiv">/build/admin/edit/editMiscellaneous.action?buildKey=${planKey}</param>
        <param name="chainEquiv">chain/admin/config/editChainMiscellaneous.action?buildKey=${planKey}</param>
        <result name="input" type="freemarker">/chain/edit/editChainMiscellaneousOptions.ftl</result>
      </action>

      <action name="configureChainVariables" class="com.atlassian.bamboo.ww2.actions.build.admin.config.variable.ConfigurePlanVariables" method="default">
        <!-- For Job redirect to Plan Details -->
        <param name="jobEquiv">/build/admin/edit/editBuildDetails.action?buildKey=${planKey}</param>
        <param name="chainEquiv">chain/admin/config/configureChainVariables.action?buildKey=${planKey}</param>
        <result name="input" type="freemarker">/chain/edit/configureChainVariables.ftl</result>
      </action>

      <action name="updateChainMiscellaneous" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildMiscellaneousOptions"
              method="create">
        <param name="jobEquiv">/build/admin/edit/editMiscellaneous.action?buildKey=${planKey}</param>
        <param name="chainEquiv">chain/admin/config/editChainMiscellaneous.action?buildKey=${planKey}</param>
        <result name="input" type="freemarker">/chain/edit/editChainMiscellaneousOptions.ftl</result>
        <result name="error" type="freemarker">/chain/edit/editChainMiscellaneousOptions.ftl</result>
        <result name="success" type="redirect">/chain/admin/config/editChainMiscellaneous.action?buildKey=${plan.key}&amp;saved=true</result>
      </action>

      <action name="editChainPermissions" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildPermissions"
              method="default">
        <param name="jobEquiv">/build/admin/edit/editBuildDetails.action?buildKey=${planKey}</param>
        <param name="chainEquiv">chain/admin/config/editChainPermissions.action?buildKey=${planKey}</param>
        <result name="input" type="freemarker">/chain/edit/editChainPermissions.ftl</result>
      </action>

      <action name="updateChainPermissions" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildPermissions"
              method="updatePermissions">
        <param name="jobEquiv">/build/admin/edit/editBuildDetails.action?buildKey=${planKey}</param>
        <param name="chainEquiv">chain/admin/config/editChainPermissions.action?buildKey=${planKey}</param>
        <result name="input" type="freemarker">/chain/edit/editChainPermissions.ftl</result>
        <result name="editPermissions" type="redirect">/chain/admin/config/editChainPermissions.action?buildKey=${plan.key}</result>
        <result name="success" type="redirect">/chain/admin/config/editChainPermissions.action?buildKey=${plan.key}&amp;saved=true</result>
      </action>

    </package>
    
    <package name="chainView" extends="default" namespace="/chain">

      <action name="viewChain" class="com.atlassian.bamboo.ww2.actions.chains.ViewChainSummary" method="default">
          <result name="success" type="freemarker">/chain/view/viewChainSummary.ftl</result>
          <result name="input" type="freemarker">/chain/view/viewChainSummary.ftl</result>
          <result name="error" type="freemarker">/error.ftl</result>
      </action>

      <action name="viewFailurePeriods" class="com.atlassian.bamboo.ww2.actions.chains.ViewChainSummary" method="default">
        <result name="success" type="freemarker">/chain/view/viewChainFailurePeriods.ftl</result>
        <result name="error" type="freemarker">/error.ftl</result>
      </action>

      <action name="listChainResults" class="com.atlassian.bamboo.ww2.actions.chains.ListChainResults">
          <result name="input" type="freemarker">/chain/view/listChainResults.ftl</result>
          <result name="success" type="freemarker">/chain/view/listChainResults.ftl</result>
      </action>

      <action name="viewChainConfiguration" class="com.atlassian.bamboo.ww2.actions.chains.admin.ViewChainConfiguration" method="default">
          <result name="success" type="freemarker">/chain/view/viewChainSummary.ftl</result>
          <result name="input" type="freemarker">/chain/config/viewChainConfiguration.ftl</result>
          <result name="error" type="freemarker">/error.ftl</result>
      </action>

      <action name="viewChainActivityLog" class="com.atlassian.bamboo.ww2.actions.ViewActivityLog">
        <result name="input" type="freemarker">/chain/view/viewChainActivityLog.ftl</result>
        <result name="error" type="freemarker">/error.ftl</result>
      </action>

      <action name="viewChainPermissions" class="com.atlassian.bamboo.ww2.actions.build.admin.config.ConfigureBuildPermissions" method="default">
        <result name="input" type="freemarker">/build/view/viewBuildPermissions.ftl</result>
      </action>

    </package>

  <package name="chainViewResult" extends="default" namespace="/chain/result">

    <action name="viewChainResult" class="com.atlassian.bamboo.ww2.actions.chains.ViewChainResult">
      <result name="success" type="freemarker">/chain/view/viewChainResult.ftl</result>
    </action>

    <action name="viewChainResultTestSummary" class="com.atlassian.bamboo.ww2.actions.chains.ViewChainTestResults">
      <result name="success" type="freemarker">/chain/view/viewChainResultTestSummary.ftl</result>
    </action>

    <action name="viewChainLog" class="com.atlassian.bamboo.ww2.actions.chains.ViewChainLogs">
      <result name="success" type="freemarker">/chain/view/viewChainLogs.ftl</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>

    <action name="viewChainArtifacts" class="com.atlassian.bamboo.ww2.actions.chains.ViewChainArtifacts">
      <result name="success" type="freemarker">/chain/view/viewChainArtifacts.ftl</result>
    </action>

    <action name="removeChainArtifacts" class="com.atlassian.bamboo.ww2.actions.build.admin.RemoveBuildArtifacts">
      <result name="error" type="freemarker">/error.ftl</result>
      <result name="success" type="redirect">/chain/result/viewChainArtifacts.action?buildKey=${plan.key}&amp;buildNumber=${buildNumber}</result>
    </action>

    <action name="viewChainCommits" class="com.atlassian.bamboo.build.PlanResultsAction">
      <result name="success" type="freemarker">/build/result/viewBuildResultsChanges.ftl</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>
  </package>

  <!-- =============================================================================================== Build Actions -->
  <package name="buildView" extends="default" namespace="/build">

    <!--filter-->
    <action name="setResultsFitler" class="com.atlassian.bamboo.builder.resultsfilter.SetResultsFilter">
      <result name="success" type="redirect">/start.action</result>
    </action>

    <!-- The various build tab views use the same action class, with different page views -->

    <action name="viewBuildHistory" class="com.atlassian.bamboo.build.ListBuildResults" method="default">
      <result name="input" type="freemarker">/viewBuildHistory.ftl</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>

    <action name="viewBuildSummary" class="com.atlassian.bamboo.build.ViewBuild">
      <result name="input" type="freemarker">/viewBuildSummary.ftl</result>
      <result name="success" type="redirect">/build/viewBuildSummary!default.action?buildKey=${build.key}</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>

    <action name="viewFailurePeriods" class="com.atlassian.bamboo.build.ViewBuild" method="execute">
      <result name="success" type="freemarker">/build/viewFailurePeriods.ftl</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>


    <!--Fragment actions-->
    <action name="viewBuildResultsTable" class="com.atlassian.bamboo.ww2.actions.build.ViewBuildResultsTable">
      <result name="success" type="freemarker">/fragments/buildResults/buildResultsTable.ftl</result>
    </action>

    <action name="viewBuildResultsTableByPlans" class="com.atlassian.bamboo.ww2.actions.build.ViewBuildResultsTableByPlans">
      <result name="success" type="freemarker">/fragments/buildResults/buildResultsTableByPlans.ftl</result>
    </action>

    <action name="viewBuildResultsIssueFocussed" class="com.atlassian.bamboo.ww2.actions.build.ViewBuildResultsTable">
      <result name="success" type="freemarker">/fragments/buildResults/issueFocussedBuildResults.ftl</result>
    </action>

    <!--Navigation Action-->
    <action name="viewBuildFiles" class="com.atlassian.bamboo.build.ViewBuildFiles">
      <result name="success" type="freemarker">/viewBuildFiles.ftl</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>

    <action name="viewBuildActivityLog" class="com.atlassian.bamboo.ww2.actions.ViewActivityLog">
      <result name="input" type="freemarker">/build/viewBuildActivityLog.ftl</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>

    <action name="viewTestCaseHistory" class="com.atlassian.bamboo.build.tests.ViewTestCaseAction" method="default">
      <param name="chainEquiv">/browse/${planKey}</param>
      <param name="jobEquiv">/browse/${planKey}</param>
      <result name="input" type="freemarker">/build/tests/viewTestCase.ftl</result>
      <result name="success" type="redirect">/build/viewTestCaseHistory.action?buildKey=${build.key}&amp;testCaseKey=${testCase.key}</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>

    <action name="viewTestsSummary" class="com.atlassian.bamboo.build.tests.ViewTestsSummary">
      <result name="success" type="freemarker">/build/tests/viewTestsSummary.ftl</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>

    <!-- New Build edit actions -->
    <action name="buildConfiguration" class="com.atlassian.bamboo.ww2.actions.build.admin.ViewBuildConfiguration">
      <result name="input" type="freemarker">/build/view/buildConfiguration.ftl</result>
      <result name="success" type="freemarker">/build/view/buildConfiguration.ftl</result>
    </action>

  </package>

  <package name="buildResultView" extends="default" namespace="/build/result">

    <action name="viewBuildResults" class="com.atlassian.bamboo.build.ViewBuildResults">
      <result name="success" type="freemarker">/build/result/viewBuildResults.ftl</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>

    <action name="gotoBuildResult" class="com.atlassian.bamboo.build.GotoBuildResult">
      <result name="success" type="redirect">/build/result/viewBuildResults.action</result>
      <result name="input" type="redirect"/>
    </action>

    <action name="viewPreviousBuildResults" class="com.atlassian.bamboo.build.ViewPreviousBuildResults">
      <result name="success" type="redirect">/build/result/viewBuildResults.action</result>
    </action>

    <action name="viewNextBuildResults" class="com.atlassian.bamboo.build.ViewNextBuildResults">
      <result name="success" type="redirect">/build/result/viewBuildResults.action</result>
    </action>

    <action name="viewBuildArtifacts" class="com.atlassian.bamboo.build.ViewBuildResults">
      <result name="success" type="freemarker">/build/result/viewBuildArtifacts.ftl</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>

    <action name="viewBuildCommits" class="com.atlassian.bamboo.build.ViewBuildResults">
      <result name="success" type="freemarker">/build/result/viewBuildResultsChanges.ftl</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>

    <action name="viewBuildLog" class="com.atlassian.bamboo.build.ViewBuildLogs">
      <result name="success" type="freemarker">/build/result/viewBuildLog.ftl</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>

    <action name="viewBuildResultsTests" class="com.atlassian.bamboo.build.ViewBuildResultsTests">
      <param name="chainEquiv">/browse/${planKey}-${buildNumber}/test</param>
      <result name="show_successes" type="redirect">/build/result/viewBuildResultsSuccessfulTests.action?buildKey=${build.key}&amp;buildNumber=${buildNumber}</result>
      <result name="show_failures" type="redirect">/build/result/viewBuildResultsFailedTests.action?buildKey=${build.key}&amp;buildNumber=${buildNumber}</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>

    <action name="viewBuildResultsFailedTests" class="com.atlassian.bamboo.build.ViewBuildResults">
      <param name="chainEquiv">/browse/${planKey}-${buildNumber}/test</param>
      <result name="success" type="freemarker">/build/result/viewBuildResultsFailedTests.ftl</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>

    <action name="viewBuildResultsSuccessfulTests" class="com.atlassian.bamboo.build.ViewBuildResultsSuccessfulTests">
      <param name="chainEquiv">/browse/${planKey}-${buildNumber}/test</param>
      <result name="success" type="freemarker">/build/result/viewBuildResultsSuccessfulTests.ftl</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>

    <action name="viewTestCaseResult" class="com.atlassian.bamboo.build.ViewTestCaseResultAction">
      <param name="chainEquiv">/browse/${planKey}-${buildNumber}</param>
      <param name="jobEquiv">/browse/${planKey}-${buildNumber}</param>
      <result name="success" type="freemarker">/build/result/viewTestCaseResult.ftl</result>
      <result name="noResult" type="freemarker">/build/result/viewNoTestCaseResult.ftl</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>

    <action name="viewBuildResultsMetaData" class="com.atlassian.bamboo.build.PlanResultsAction">
      <result name="success" type="freemarker">/build/result/viewBuildResultsMetaData.ftl</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>
  </package>

  <!-- Build ajax snippets -->
  <package name="buildViewAjaxFragments" extends="buildView" namespace="/build/ajax">
    <action name="viewBuildCommits" class="com.atlassian.bamboo.build.PlanResultsAction">
      <result name="success" type="freemarker">/buildResult/viewCommitsSummary.ftl</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>

    <action name="viewBuildComments" class="com.atlassian.bamboo.build.PlanResultsAction">
      <result name="success" type="freemarker">/buildResult/viewCommentsSummary.ftl</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>

    <action name="createComment" class="com.atlassian.bamboo.ww2.actions.comment.EditCommentAction" method="create">
      <result name="success" type="redirect">/browse/${plan.key}-${buildNumber}</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>

    <action name="deleteComment" class="com.atlassian.bamboo.ww2.actions.comment.EditCommentAction" method="delete">
      <result name="success" type="redirect">/browse/${plan.key}-${buildNumber}</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>
  </package>
  <!-- ======================================================================================== Label Actions -->
  <package name="labelFragments" extends="buildView" namespace="/build/label/ajax">
    <action name="addLabels" class="com.atlassian.bamboo.ww2.actions.labels.EditLabelsAction" method="addLabels">
      <result name="success" type="redirect">/build/label/ajax/viewLabels.action?buildKey=${plan.key}&amp;buildNumber=${buildNumber}</result>
      <result name="input" type="freemarker">/fragments/labels/labelInput.ftl</result>
      <result name="error" type="freemarker">/fragments/labels/labelInput.ftl</result>
    </action>
    <action name="viewLabels" class="com.atlassian.bamboo.ww2.actions.labels.EditLabelsAction" method="viewLabels">
      <result name="input" type="freemarker">/fragments/labels/labelView.ftl</result>
    </action>
    <action name="editLabels" class="com.atlassian.bamboo.ww2.actions.labels.EditLabelsAction" method="viewLabels">
      <result name="input" type="freemarker">/fragments/labels/labelInput.ftl</result>
    </action>
    <action name="deleteLabel" class="com.atlassian.bamboo.ww2.actions.labels.EditLabelsAction" method="deleteLabel">
      <result name="success" type="freemarker">/fragments/labels/labelInput.ftl</result>
    </action>
    <action name="indicateFavourite" class="com.atlassian.bamboo.ww2.actions.labels.SetFavouriteAction" method="view">
      <result name="input" type="freemarker">/fragments/labels/favouriteIndicator.ftl</result>
    </action>
  </package>

  <package name="labels" extends="buildView" namespace="/build/label">
    <action name="viewBuildsForLabel" class="com.atlassian.bamboo.ww2.actions.labels.ViewBuildResultsForLabelAction">
      <result name="error" type="freemarker">/error.ftl</result>
      <result name="success" type="freemarker">/labels/viewBuildsForLabel.ftl</result>
    </action>

    <action name="viewLabels" class="com.atlassian.bamboo.ww2.actions.labels.ViewLabels">
      <result name="error" type="freemarker">/error.ftl</result>
      <result name="success" type="freemarker">/labels/viewLabels.ftl</result>
    </action>

    <action name="setFavourite" class="com.atlassian.bamboo.ww2.actions.labels.SetFavouriteAction">
      <result name="success" type="redirect">/start.action</result>
    </action>


  </package>
  <!-- ======================================================================================== Chart Actions -->
  <package name="charts" extends="default" namespace="/charts">
    <action name="viewCombinedByBuildNumberChart" class="com.atlassian.bamboo.ww2.actions.charts.ViewCombinedByBuildNumberChart">
      <result name="success" type="freemarker">/fragments/charts/combinedByBuildNumberChart.ftl</result>
    </action>
    <action name="viewCombinedByTimePeriodChart" class="com.atlassian.bamboo.ww2.actions.charts.ViewCombinedByTimePeriodChart">
      <result name="success" type="freemarker">/fragments/charts/combinedByTimePeriodChart.ftl</result>
    </action>
    <action name="viewReportChart" class="com.atlassian.bamboo.ww2.actions.charts.ViewReportChart">
      <result name="success" type="freemarker">/fragments/charts/reportChart.ftl</result>
    </action>
    <action name="viewAuthorChart" class="com.atlassian.bamboo.ww2.actions.charts.ViewAuthorChart">
      <result name="success" type="freemarker">/fragments/charts/reportChart.ftl</result>
    </action>

  </package>

  <!-- ============================================================================================ JS Widget Actions-->
  <!-- Actions in here get rendered by the jsWriter as a series of document.write("blah") js codes. -->
  <package name="jsWidgets" extends="ajax" namespace="/js">
    <action name="viewCombinedByBuildNumberChart" class="com.atlassian.bamboo.ww2.actions.charts.ViewCombinedByBuildNumberChart">
      <result name="success" type="freemarker">/fragments/charts/combinedByBuildNumberChart.ftl</result>
    </action>
    <action name="jsViewCombinedByTimePeriodChart" class="com.atlassian.bamboo.ww2.actions.charts.ViewCombinedByTimePeriodChart">
      <result name="success" type="freemarker">/fragments/charts/jsCombinedByTimePeriodChart.ftl</result>
    </action>
    <action name="showLatestBuildStatus" class="com.atlassian.bamboo.build.ShowLatestBuildStatus">
      <result name="success" type="freemarker">/fragments/plan/latestStatus.ftl</result>
    </action>

  </package>

  <package name="jsWidgets2" extends="jsWidgets" namespace="/">
  </package>

  <!-- ============================================================================================== Author Actions -->

  <package name="authors" extends="default" namespace="/authors">
    <action name="viewAuthors" class="com.atlassian.bamboo.ww2.actions.author.ViewAuthors" method="list">
      <result name="success" type="freemarker">/author/viewAuthors.ftl</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>
    <action name="viewAuthor" class="com.atlassian.bamboo.ww2.actions.author.ViewAuthor" method="default">
      <result name="success" type="freemarker">/author/viewAuthor.ftl</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>
    <action name="viewAuthorReport" class="com.atlassian.bamboo.ww2.actions.author.ViewAuthors" method="read">
      <result name="input" type="freemarker">/author/authorReport.ftl</result>
      <result name="success" type="freemarker">/author/authorReport.ftl</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>
    <action name="generateAuthorReport" class="com.atlassian.bamboo.ww2.actions.author.ViewAuthors" method="generate">
      <result name="input" type="freemarker">/author/authorReport.ftl</result>
      <result name="success" type="freemarker">/author/authorReport.ftl</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>

    <action name="gotoAuthorReport" class="com.atlassian.bamboo.ww2.actions.author.GotoAuthors">
      <result name="list" type="redirect">/authors/viewAuthors.action</result>
      <result name="report" type="redirect">/authors/viewAuthorReport.action</result>
    </action>

  </package>

  <package name="users" extends="default" namespace="/users">
    <action name="viewUserSummary" class="com.atlassian.bamboo.ww2.actions.user.ViewUserSummary" method="default">
      <result name="input" type="freemarker">/admin/user/viewUserSummary.ftl</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>
  </package>

  <!-- ======================================================================================== User Profile Actions -->

  <package name="profile" extends="default" namespace="/profile">

    <global-results>
      <result name="login" type="redirect">/userlogin!default.action?os_destination=${encodedCurrentUrl}</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </global-results>

    <action name="changePassword" class="com.atlassian.bamboo.security.ChangePassword" >
      <result name="input" type="freemarker">/admin/changePassword.ftl</result>
      <result name="success" type="redirect">/profile/userProfile.action</result>
      <result name="error" type="freemarker">/admin/changePassword.ftl</result>
    </action>

    <action name="changeForgottenPassword" class="com.atlassian.bamboo.security.ChangeForgottenPassword">
      <result name="input" type="freemarker">/admin/changeForgottenPassword.ftl</result>
      <result name="success" type="freemarker">/admin/passwordChangeSuccessful.ftl</result>
      <result name="error" type="freemarker">/admin/changeForgottenPassword.ftl</result>
    </action>

    <action name="userProfile" class="com.atlassian.bamboo.ww2.actions.admin.user.ConfigureProfile" method="default">
      <result name="input" type="freemarker">/admin/user/userProfile.ftl</result>
    </action>

    <action name="editProfile" class="com.atlassian.bamboo.ww2.actions.admin.user.ConfigureProfile" method="edit">
      <result name="input" type="freemarker">/admin/user/changeProfile.ftl</result>
    </action>

    <action name="updateProfile" class="com.atlassian.bamboo.ww2.actions.admin.user.ConfigureProfile" method="update">
      <result name="success" type="redirect">/profile/userProfile.action</result>
      <result name="input" type="freemarker">/admin/user/changeProfile.ftl</result>
    </action>

    <action name="updateExternalProfile" class="com.atlassian.bamboo.ww2.actions.admin.user.ConfigureProfile" method="update">
      <result name="success" type="redirect">/profile/userProfile.action</result>
      <result name="input" type="freemarker">/admin/user/changeProfile.ftl</result>
    </action>

    <action name="userNotifications" class="com.atlassian.bamboo.ww2.actions.admin.user.ConfigureNotificationPreferences" method="default">
      <result name="input" type="freemarker">/admin/user/userNotifications.ftl</result>
    </action>

    <action name="editUserNotifications" class="com.atlassian.bamboo.ww2.actions.admin.user.ConfigureNotificationPreferences" method="edit">
      <result name="input" type="freemarker">/admin/user/editUserNotifications.ftl</result>
    </action>

    <action name="updateUserNotifications" class="com.atlassian.bamboo.ww2.actions.admin.user.ConfigureNotificationPreferences">
      <result name="input" type="freemarker">/admin/user/editUserNotifications.ftl</result>
      <result name="success" type="redirect">/profile/userNotifications.action</result>
    </action>

  </package>


  <!-- ======================================================================================== Reports Actions -->

  <package name="reports" extends="default" namespace="/reports">
    <action name="viewReport" class="com.atlassian.bamboo.ww2.actions.reports.ViewReport" method="view">
      <result name="success" type="freemarker">/reports/viewReport.ftl</result>
      <result name="input" type="freemarker">/reports/viewReport.ftl</result>
    </action>

    <action name="generateReport" class="com.atlassian.bamboo.ww2.actions.reports.ViewReport" method="generate">
      <result name="success" type="freemarker">/reports/viewReport.ftl</result>
      <result name="hideHeader" type="freemarker">/reports/viewReportHideHeader.ftl</result>
      <result name="error" type="freemarker">/reports/viewReport.ftl</result>
      <result name="input" type="freemarker">/reports/viewReport.ftl</result>
    </action>
  </package>

  <!-- ========================================================================================= Generic WW2 Actions -->
  <!-- Generic Actions that's been converted to Freemarker-->
  <package name="ww2" extends="default">

    <interceptors>
      <interceptor-stack name="signupStack">
        <interceptor-ref name="defaultStack"/>
        <interceptor-ref name="signupCheck"/>
      </interceptor-stack>
    </interceptors>

    <global-results>
      <result name="welcome" type="freemarker">/welcome.ftl</result>
      <result name="no_js" type="redirect">/legacyDashboard.action</result>
    </global-results>

    <action name="start" class="com.atlassian.bamboo.webwork.StarterAction" method="start">
      <result name="success" type="redirect">${dashboardTabUrl}</result>
    </action>

    <action name="myBamboo" class="com.atlassian.bamboo.webwork.StarterAction" method="start">
      <result name="success" type="freemarker">/myBambooDashboard.ftl</result>
    </action>

    <action name="allPlans" class="com.atlassian.bamboo.webwork.StarterAction" method="start">
      <result name="success" type="freemarker">/allPlansDashboard.ftl</result>
    </action>

    <action name="currentActivity" class="com.atlassian.bamboo.webwork.StarterAction" method="start">
      <result name="success" type="freemarker">/currentActivityDashboard.ftl</result>
    </action>

    <action name="legacyDashboard" class="com.atlassian.bamboo.webwork.StarterAction">
      <result name="success" type="freemarker">/legacyDashboard.ftl</result>
    </action>

    <action name="signupUser" class="com.atlassian.bamboo.ww2.actions.admin.user.signup.SignupUser">
      <interceptor-ref name="signupStack"/>
      <result name="error" type="freemarker">/admin/user/signupUser.ftl</result>
      <result name="input" type="freemarker">/admin/user/signupUser.ftl</result>
      <result name="success" type="loginRedirect">/start.action</result>
    </action>

    <action name="viewAdministrators" class="com.atlassian.bamboo.ww2.actions.admin.user.ViewAdministrators">
      <result name="success" type="freemarker">/admin/user/viewAdministrators.ftl</result>
    </action>

    <action name="updateLicense" class="com.atlassian.bamboo.ww2.actions.admin.SetupUpdateLicenseAction">
      <interceptor-ref name="setupStack"/>
      <result name="input" type="freemarker">/admin/updateLicense.ftl</result>
      <result name="success" type="redirect">/start.action</result>
      <result name="error" type="freemarker">/admin/updateLicense.ftl</result>
    </action>

  </package>

  <!-- ================================================================================================= Rss Actions -->
  <package name="rss" extends="default" namespace="/rss">
    <action name="rssFeed" class="com.atlassian.bamboo.ww2.actions.rss.RssFeedAction">
      <result type="rss" name="rss">
        <param name="location">rss_2.0</param>
      </result>
    </action>

    <action name="createLabelRssFeed" class="com.atlassian.bamboo.ww2.actions.rss.LabelRssFeedAction">
      <result type="rss" name="rss">
        <param name="location">rss_2.0</param>
      </result>
    </action>

    <action name="createAllBuildsRssFeed" class="com.atlassian.bamboo.ww2.actions.rss.AllBuildsRssFeedAction">
      <result type="rss" name="rss">
        <param name="location">rss_2.0</param>
      </result>
    </action>
  </package>

  <!-- ================================================================================================= WW1 Actions -->
  <!-- These are the webwork 1 actions that has been quickly converted to use WebWork2-->
  <package name="ww1" extends="default">

    <default-interceptor-ref name="defaultStack"/>

    <!-- Alternative views -->
    <action name="telemetry" class="com.atlassian.bamboo.webwork.ViewTelemetryAction">
      <result name="success" type="freemarker">/telemetry.ftl</result>
    </action>

    <action name="jsExport" class="com.atlassian.bamboo.webwork.StarterAction">
      <result name="success" type="freemarker">/jsExport.ftl</result>
    </action>

    <!-- Login and Password actions  -->

    <action name="userlogin" class="com.atlassian.bamboo.security.Login">
      <result name="input" type="freemarker">/login.ftl</result>
      <result name="success" type="freemarker">/login.ftl</result>
      <result name="error" type="freemarker">/login.ftl</result>
    </action>

    <action name="forgotPassword" class="com.atlassian.bamboo.security.ForgotPassword">
      <result name="success" type="freemarker">/sendingNewPassword.ftl</result>
      <result name="input" type="freemarker">/forgotPassword.ftl</result>
      <result name="error" type="freemarker">/forgotPassword.ftl</result>
    </action>

    <action name="userLogout" class="com.atlassian.bamboo.security.Logout">
      <result name="success" type="redirect">/start.action</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>

    <action name="allowLicenseUpdateOrShowExpirationInfo" class="com.atlassian.bamboo.security.AllowLicenseUpdateOrShowExpirationInfo">
      <result name="success" type="redirect">/setup/updateLicense!default.action</result>
      <result name="none" type="redirect">/userlogin!default.action?bam_authstatus=adminNeeded</result>
    </action>

   <!-- error reporting -->

    <action name="viewError" class="com.atlassian.bamboo.logger.ViewBuildError">
      <result name="success" type="freemarker">/admin/viewError.ftl</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>

    <action name="removeErrorFromLog" class="com.atlassian.bamboo.logger.RemoveBuildError">
      <result name="success" type="redirect">/start.action</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>

    <action name="removePlanErrorsFromLog" class="com.atlassian.bamboo.logger.RemoveBuildError" method="removePlanErrors">
      <result name="success" type="redirect">/start.action</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>

    <action name="adminErrors" class="com.atlassian.bamboo.logger.AdminErrorAction">
      <result name="success" type="redirect">/start.action</result>
      <result name="error" type="freemarker">/error.ftl</result>
    </action>

    <!-- Update and build is in the default packge so that old triggers will still work -->
    <action name="updateAndBuild" class="com.atlassian.bamboo.v2.ww2.build.TriggerRemoteBuild">
      <!--<interceptor-ref name="waitingAction" />-->
      <result name="success" type="freemarker">/api/rest/updateAndBuild.ftl</result>
      <result name="error" type="freemarker">/api/rest/error.ftl</result>
    </action>

  </package>

  <!-- RESTful api actions -->

  <package name="rest" extends="default" namespace="/api/rest">

    <default-interceptor-ref name="remoteApiStack"/>

    <global-results>
      <result name="accessDenied" type="freemarker-xml">/api/rest/accessDenied.ftl</result>
      <result name="error" type="freemarker-xml">/api/rest/error.ftl</result>
    </global-results>

    <action name="login" class="com.atlassian.bamboo.rest.Login">
      <result name="success" type="freemarker-xml">/api/rest/login.ftl</result>
    </action>

    <action name="logout" class="com.atlassian.bamboo.rest.Logout">
      <result name="success" type="freemarker-xml">/api/rest/login.ftl</result>
    </action>

    <action name="listBuildNames" class="com.atlassian.bamboo.rest.ListBuildNames">
      <result name="success" type="freemarker-xml">/api/rest/listBuilds.ftl</result>
    </action>

    <action name="listRunningInstances" class="com.atlassian.bamboo.rest.ListRunningInstances">
      <result name="success" type="freemarker-xml">/api/rest/listRunningInstances.ftl</result>
    </action>

    <action name="listProjectNames" class="com.atlassian.bamboo.rest.ListProjectNames">
      <result name="success" type="freemarker-xml">/api/rest/listProjects.ftl</result>
    </action>

    <action name="getProjectDetails" class="com.atlassian.bamboo.rest.GetProjectDetails">
      <result name="success" type="freemarker-xml">/api/rest/projectDetails.ftl</result>
    </action>

    <action name="getLatestUserBuilds" class="com.atlassian.bamboo.rest.GetLatestUserBuilds">
      <result name="success" type="freemarker-xml">/api/rest/userBuilds.ftl</result>
    </action>

    <action name="getLatestBuildResults" class="com.atlassian.bamboo.rest.GetLatestBuildResults">
      <result name="success" type="freemarker-xml">/api/rest/latestBuildResults.ftl</result>
    </action>

    <action name="getLatestBuildResultsForProject" class="com.atlassian.bamboo.rest.GetLatestBuildResultsForProject">
      <result name="success" type="freemarker-xml">/api/rest/latestBuildResultsForProject.ftl</result>
    </action>

    <action name="getRecentlyCompletedBuildResultsForProject" class="com.atlassian.bamboo.rest.GetRecentlyCompletedBuildResultsForProject">
      <result name="success" type="freemarker-xml">/api/rest/recentlyCompletedBuildResultsForProject.ftl</result>
    </action>

    <action name="getRecentlyCompletedBuildResultsForBuild" class="com.atlassian.bamboo.rest.GetRecentlyCompletedBuildResultsForBuild">
        <result name="success" type="freemarker-xml">/api/rest/recentlyCompletedBuildResultsForBuild.ftl</result>
    </action>

    <action name="getLatestBuildsByUser" class="com.atlassian.bamboo.rest.GetLatestBuildsByUser">
        <result name="success" type="freemarker-xml">/api/rest/latestBuildsByUser.ftl</result>
    </action>

    <action name="executeBuild" class="com.atlassian.bamboo.rest.ExecuteBuild">
      <result name="success" type="freemarker-xml">/api/rest/response.ftl</result>
      <result name="error" type="freemarker-xml">/api/rest/error.ftl</result>
    </action>

    <action name="logToServer" class="com.atlassian.bamboo.rest.LogToServer">
      <result name="success" type="freemarker-xml">/api/rest/logToServer.ftl</result>
    </action>

    <action name="getBambooBuildNumber" class="com.atlassian.bamboo.rest.GetBambooBuildNumber">
      <result name="success" type="freemarker-xml">/api/rest/bambooBuildNumber.ftl</result>
    </action>

    <action name="getBuildResultsDetails" class="com.atlassian.bamboo.rest.GetBuildResultsDetails">
      <result name="success" type="freemarker-xml">/api/rest/buildResultsDetails.ftl</result>
    </action>

    <action name="addCommentToBuildResults" class="com.atlassian.bamboo.rest.AddCommentToBuildResults">
      <result name="success" type="freemarker-xml">/api/rest/response.ftl</result>
    </action>

    <action name="addLabelToBuildResults" class="com.atlassian.bamboo.rest.AddLabelToBuildResults">
      <result name="success" type="freemarker-xml">/api/rest/response.ftl</result>
    </action>

    <action name="stopElasticInstance" class="com.atlassian.bamboo.rest.StopElasticAgents">
      <result name="success" type="freemarker-xml">/api/rest/response.ftl</result>
    </action>

    <action name="startElasticInstances" class="com.atlassian.bamboo.rest.StartElasticAgents">
      <result name="success" type="freemarker-xml">/api/rest/response.ftl</result>
    </action>

    <action name="stopAllElasticInstances" class="com.atlassian.bamboo.rest.StopAllElasticAgents">
      <result name="success" type="freemarker-xml">/api/rest/response.ftl</result>
    </action>

  </package>

  <package name="funcMaster" extends="default" namespace="/func">

    <default-interceptor-ref name="errorStack"/>

    <action name="funcMaster" class="com.opensymphony.xwork.ActionSupport">
      <result name="success" type="freemarker">/func/func.ftl</result>
    </action>
  </package>

  <package name="textDownloads" extends="default" namespace="/textdownloads">
    <action name="downloadBuildLog" class="com.atlassian.bamboo.build.ViewBuildResults">
      <param name="fileName">${buildKey}-${buildNumber}-console-log.txt</param>
      <result name="success" type="freemarker-text">/textdownloads/buildLog.ftl</result>
    </action>
  </package>

  <package name="agentServer" extends="default" namespace="/agentServer">
    <action name="GetFingerprint" class="com.atlassian.bamboo.agent.classserver.GetFingerprintAction" method="default">
      <result name="success" type="freemarker">
        <param name="contentType">text/plain</param>
        <param name="location">/agentServer/fingerprint.ftl</param>
      </result>
    </action>
  </package>

</xwork>
